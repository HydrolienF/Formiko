<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PanneauCarte.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Formiko</a> &gt; <a href="index.source.html" class="el_package">fr.formiko.views.gui2d</a> &gt; <span class="el_source">PanneauCarte.java</span></div><h1>PanneauCarte.java</h1><pre class="source lang-java linenums">package fr.formiko.views.gui2d;

import fr.formiko.formiko.CCreature;
import fr.formiko.formiko.CGraine;
import fr.formiko.formiko.Case;
import fr.formiko.formiko.Creature;
import fr.formiko.formiko.Fourmi;
import fr.formiko.formiko.Fourmiliere;
import fr.formiko.formiko.GCase;
import fr.formiko.formiko.Graine;
import fr.formiko.formiko.Insecte;
import fr.formiko.formiko.Joueur;
import fr.formiko.formiko.Main;
import fr.formiko.formiko.ObjetSurCarteAId;
import fr.formiko.usuel.debug;
import fr.formiko.usuel.erreur;
import fr.formiko.usuel.g;
import fr.formiko.usuel.images.Img;
import fr.formiko.usuel.images.Pixel;
import fr.formiko.usuel.images.image;
import fr.formiko.usuel.maths.allea;
import fr.formiko.usuel.maths.math;

import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.geom.AffineTransform;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JPanel;

/**
*{@summary Map panel.}&lt;br&gt;
*It can draw map.&lt;br&gt;
*Mouse listener part is in PanneauSup.java.&lt;br&gt;
*@author Hydrolien
*@version 1.42
*/
public class PanneauCarte extends Panneau {
  private int xCase; // nombre de case en X
  private int yCase; // nombre de case en Y
  private int posX; // position de la 1a case.
  private int posY;
  private int xTemp,yTemp;

  // CONSTRUCTEUR ---------------------------------------------------------------
<span class="nc" id="L53">  public PanneauCarte(){}</span>
  /**
  *{@summary Build methode.}&lt;br&gt;
  *@version 1.x
  */
  public void construire(){
<span class="nc" id="L59">    Main.getData().setTailleDUneCase(Main.getTailleElementGraphique(100));</span>
<span class="nc" id="L60">    posX = 0; posY = 0;</span>
<span class="nc" id="L61">    GCase gc = new GCase(1,1);</span>
<span class="nc" id="L62">    xCase = gc.getNbrX();</span>
<span class="nc" id="L63">    yCase = gc.getNbrY();</span>
    //xCase = yCase = 1.
<span class="nc" id="L65">  }</span>
  // GET SET --------------------------------------------------------------------
<span class="nc" id="L67">  public int getTailleDUneCase(){return Main.getData().getTailleDUneCase();}</span>
<span class="nc bnc" id="L68" title="All 2 branches missed.">  public void setTailleDUneCase(int x){if(x!=getTailleDUneCase()){Main.getData().setTailleDUneCase(x);actualiserCarte();}}</span>
<span class="nc" id="L69">  public int getXCase(){ return xCase;}</span>
<span class="nc" id="L70">  public void setXCase(int x){xCase = x;}</span>
<span class="nc" id="L71">  public int getYCase(){ return yCase;}</span>
<span class="nc" id="L72">  public void setYCase(int y){yCase = y;}</span>
<span class="nc" id="L73">  public int getPosX(){ return posX;}</span>
<span class="nc" id="L74">  public void setPosX(int x){posX=x; }</span>
<span class="nc" id="L75">  public int getPosY(){ return posY;}</span>
<span class="nc" id="L76">  public void setPosY(int x){posY=x; }</span>
  public void setLigne(Graphics2D g){
<span class="nc" id="L78">    BasicStroke ligne = new BasicStroke(Main.getDimLigne());</span>
<span class="nc" id="L79">    g.setStroke(ligne);</span>
<span class="nc" id="L80">    g.setColor(Color.BLACK);</span>
<span class="nc" id="L81">  }</span>
  /**
  *setSize sould never be used. Use actualiserSize insted.
  *@version 1.x
  */
  @Override
  public void setSize(int x, int y){
    //actualiserSize();
<span class="nc" id="L89">  }</span>
  /**
  *Do the 3 steps that are need to set PanneauCarte to a new size.
  *@version 1.x
  */
  public void actualiserCarte(){
<span class="nc" id="L95">    actualiserSize();//actualise la taille du PanneauCarte a la bonne dimention.</span>
    //chargerImages();
<span class="nc" id="L97">    Main.getData().iniBackgroundMapImage(); //demande au donnée d'image de rechargé l'image qui représente l'arrière plan de la carte.</span>
<span class="nc" id="L98">  }</span>
  // Fonctions propre ----------------------------------------------------------
  /**
  *{@summary Main paint function for Map.}&lt;br&gt;
  *It print 1 by 1: map with only Case, grids, all map element Case by Case, the mark for all game as playingAnt mark.
  *@version 1.42
  */
  public void paintComponent(Graphics g2){
<span class="nc bnc" id="L106" title="All 2 branches missed.">    if(!Main.getActionGameOn()){return;}</span>
    try {
<span class="nc bnc" id="L108" title="All 2 branches missed.">      if(!Main.getPartie().getEnCours()){return;}</span>
<span class="nc" id="L109">    }catch (Exception e) {</span>
<span class="nc" id="L110">      erreur.alerte(&quot;la partie est null&quot;);</span>
<span class="nc" id="L111">    }</span>
<span class="nc" id="L112">    Main.startCh();</span>
<span class="nc" id="L113">    Graphics2D g = (Graphics2D)g2;</span>
<span class="nc" id="L114">    setLigne(g);</span>
    try {
<span class="nc" id="L116">      GCase gc = Main.getGc();</span>
<span class="nc" id="L117">      actualiserSize();</span>
<span class="nc" id="L118">      debug.débogage(&quot;Dimention du PanneauCarte en case : x=&quot;+xCase+&quot; y=&quot;+yCase);</span>
<span class="nc" id="L119">      debug.débogage(&quot;taille réèle du panneau de la carte : x=&quot;+this.getWidth()+&quot;, y=&quot;+this.getHeight());</span>
      try {
<span class="nc bnc" id="L121" title="All 2 branches missed.">        if(Main.getData().getMap()==null){Main.getData().iniBackgroundMapImage();}</span>
<span class="nc" id="L122">        g.drawImage(Main.getData().getMap(),0,0,this);</span>
<span class="nc" id="L123">      }catch (Exception e) {</span>
<span class="nc" id="L124">        erreur.erreur(&quot;impossible d'afficher l'arrière plan de la carte&quot;);</span>
<span class="nc" id="L125">      }</span>
<span class="nc" id="L126">      dessinerGrille(g);</span>
<span class="nc bnc" id="L127" title="All 2 branches missed.">      for (int i=0;i&lt;xCase ;i++ ) {</span>
<span class="nc bnc" id="L128" title="All 2 branches missed.">        for (int j=0;j&lt;yCase ;j++ ) {</span>
<span class="nc" id="L129">          peintImagePourCase(gc,i,j,g);</span>
        }
      }
<span class="nc" id="L132">      drawPlayingAnt(g);</span>
<span class="nc" id="L133">    }catch (Exception e) {</span>
<span class="nc" id="L134">      erreur.erreur(&quot;Quelque chose d'imprévu est arrivé lors de l'affichage de PanneauCarte&quot;);</span>
<span class="nc" id="L135">    }</span>
<span class="nc" id="L136">    Main.endCh(&quot;repaintDeLaCarte&quot;);</span>
<span class="nc" id="L137">  }</span>
  /**
  *{@summary Draw grid.}&lt;br&gt;
  *@version 1.x
  */
  public void dessinerGrille(Graphics g){
<span class="nc bnc" id="L143" title="All 2 branches missed.">    if(Main.getDessinerGrille()){</span>
<span class="nc bnc" id="L144" title="All 2 branches missed.">      for (int i=0;i&lt;xCase+1 ;i++ ) {</span>
<span class="nc" id="L145">        int xT = Main.getData().getTailleDUneCase()*i;</span>
<span class="nc" id="L146">        g.drawLine(xT,0,xT,Main.getData().getTailleDUneCase()*yCase);</span>
      }
<span class="nc bnc" id="L148" title="All 2 branches missed.">      for (int i=0;i&lt;yCase+1 ;i++ ) {</span>
<span class="nc" id="L149">        int xT = Main.getData().getTailleDUneCase()*i;</span>
<span class="nc" id="L150">        g.drawLine(0,xT,Main.getData().getTailleDUneCase()*xCase,xT);</span>
      }
    }
<span class="nc" id="L153">  }</span>
  /*public void repaintParciel(Case c){
    peintImagePourCase(c,(Graphics2D) this.getGraphics());
  }*/
  public void peintImagePourCase(Case c,Graphics2D g){
<span class="nc" id="L158">    int x = c.getX(); int y = c.getY();</span>
<span class="nc" id="L159">    peintImagePourCase(c,x,y,g);</span>
<span class="nc" id="L160">  }</span>
  public void peintImagePourCase(GCase gc, int x, int y,Graphics2D g){
<span class="nc" id="L162">    Case c = gc.getCCase(x+posX,y+posY).getContenu();</span>
<span class="nc" id="L163">    peintImagePourCase(c,x,y,g);</span>
<span class="nc" id="L164">  }</span>
  /**
  *{@summary Draw cloud Case.}&lt;br&gt;
  *@version 1.x
  */
  public boolean peintCaseNuageuse(int x, int y,Graphics g,int xT, int yT){
<span class="nc" id="L170">    Joueur jo = Main.getPlayingJoueur();</span>
<span class="nc bnc" id="L171" title="All 2 branches missed.">    if(Main.getPartie().getCarte().getCasesNuageuses()==true){ //si il y a des cases nuageuses</span>
      try {
<span class="nc bnc" id="L173" title="All 2 branches missed.">        if(Main.getPartie().getGj().getNbrDeJoueurHumain()==1){//si il ya moins de 2 joueurs, on peu afficher les cases que le joueur voie.</span>
<span class="nc" id="L174">          jo = Main.getPartie().getGj().getJoueurHumain().getDébut().getContenu();</span>
        }
<span class="nc bnc" id="L176" title="All 2 branches missed.">        if (jo!=null){//si on a un joueur sélectionné.</span>
<span class="nc bnc" id="L177" title="All 6 branches missed.">          if ((x+posX)&gt;=0 &amp;&amp; (y+posY)&gt;=0 &amp;&amp; jo.getCaseNuageuse(x+posX,y+posY)){//si la case est invisible (nuageuse.)</span>
<span class="nc" id="L178">            g.drawImage(Main.getData().getCNuageuse(),xT,yT,this);</span>
<span class="nc" id="L179">            return true;//on ne dessine rien par dessus.</span>
          }
        }else{//si pas de joueur selcetionné toute les cases sont nuageuse.
<span class="nc" id="L182">          g.drawImage(Main.getData().getCNuageuse(),xT,yT,this);</span>
<span class="nc" id="L183">          return true;//on ne dessine rien par dessus.</span>
        }
<span class="nc" id="L185">      }catch (Exception e) {</span>
<span class="nc" id="L186">        erreur.erreur(&quot;Une case possiblement nuageuse n'as pas pue atre affiché&quot;);</span>
<span class="nc" id="L187">      }</span>
    }
<span class="nc" id="L189">    return false;</span>
  }
  /**
  *{@summary Draw the mark for playingAnt.}&lt;br&gt;
  *@version 1.x
  */
  private void drawPlayingAnt(Graphics g){
<span class="nc bnc" id="L196" title="All 2 branches missed.">    if(Main.getPlayingAnt()!=null){</span>
<span class="nc" id="L197">      Case c = Main.getPlayingAnt().getCCase().getContenu();</span>
<span class="nc" id="L198">      g.drawImage(Main.getData().getSelectionnee(),(c.getX()-posX)*Main.getData().getTailleDUneCase(),(c.getY()-posY)*Main.getData().getTailleDUneCase(),this);</span>
    }
<span class="nc" id="L200">  }</span>

  /**
  *{@summary Draw a Case.}&lt;br&gt;
  *@version 1.x
  */
  public void peintImagePourCase(Case c, int x, int y,Graphics2D g){
<span class="nc" id="L207">    Joueur jo = Main.getPlayingJoueur();</span>
<span class="nc" id="L208">    Fourmi fi = Main.getPlayingAnt();</span>
<span class="nc bnc" id="L209" title="All 2 branches missed.">    if(fi==null){</span>
      try {
<span class="nc" id="L211">        fi=(Fourmi)jo.getFere().getGc().getDébut().getContenu();</span>
<span class="nc" id="L212">      }catch (Exception e) {}</span>
    }
<span class="nc" id="L214">    int xT = x*Main.getData().getTailleDUneCase(); int yT = y*Main.getData().getTailleDUneCase();</span>
<span class="nc" id="L215">    int xT2 = (x-posX)*Main.getData().getTailleDUneCase(); int yT2 = (y-posY)*Main.getData().getTailleDUneCase();</span>
<span class="nc bnc" id="L216" title="All 2 branches missed.">    if(peintCaseNuageuse(x,y,g,xT,yT)){ return;}//si la case est nuageuse, on n'affichera rien d'autre dessus.</span>
<span class="nc" id="L217">    byte ty = c.getType();</span>
<span class="nc" id="L218">    CCreature ccrea = c.getGc().getDébut();</span>
<span class="nc" id="L219">    CGraine ccg = c.getGg().getDébut();</span>
<span class="nc" id="L220">    int lenTIF = Main.getData().getTIF()[0].length+1;</span>
    try {
<span class="nc" id="L222">      int tC10 = Main.getData().getTailleDUneCase()/10;int tC4 = Main.getData().getTailleDUneCase()/4;int tC2 = Main.getData().getTailleDUneCase()/2;</span>
      // la fourmilière
<span class="nc bnc" id="L224" title="All 2 branches missed.">      if (c.getFere()!=null){</span>
<span class="nc" id="L225">        g.drawImage(Main.getData().getFere(),xT+tC4,yT+tC4,this);</span>
<span class="nc" id="L226">        int tailleDuCercle = Main.getTailleElementGraphique(20);</span>
<span class="nc" id="L227">        drawRondOuRect(xT,yT,Main.getData().getTailleDUneCase(),g,c.getFere(),tailleDuCercle);</span>
        //affichage d'un rond de la couleur de la fere.
      }
<span class="nc bnc" id="L230" title="All 6 branches missed.">      if(jo!=null &amp;&amp; Main.getPartie().getCarte().getCasesSombres() &amp;&amp; jo.getCaseSombre(x+posX,y+posY)){</span>
<span class="nc" id="L231">        g.drawImage(Main.getData().getCSombre(),xT,yT,this); // si les créatures sur la case ne sont pas visible.</span>
      }else{
        // les graines
<span class="nc" id="L234">        int k=0;</span>
<span class="nc bnc" id="L235" title="All 2 branches missed.">        if(Main.getAffGraine()){</span>
<span class="nc bnc" id="L236" title="All 2 branches missed.">          while (ccg!=null){</span>
<span class="nc" id="L237">            calculerXYTemp(xT,yT,k,c);k++;</span>
<span class="nc" id="L238">            int dir = getDir((ObjetSurCarteAId)ccg.getContenu());</span>
            try {
<span class="nc" id="L240">              g.drawImage(Main.getData().getTG()[dir][ccg.getContenu().getType()],xTemp,yTemp,this);</span>
<span class="nc" id="L241">            }catch (Exception e) {}</span>
<span class="nc bnc" id="L242" title="All 2 branches missed.">            if(ccg.getContenu().getOuverte()){drawIcone(g,5,xT,yT,tC2);}</span>
<span class="nc bnc" id="L243" title="All 4 branches missed.">            else if(fi==null || ccg.getContenu().getDureté()&lt;=fi.getDuretéMax()){drawIcone(g,4,xT,yT,tC2);}</span>
<span class="nc" id="L244">            else {drawIcone(g,6,xT,yT,tC2);}</span>
<span class="nc" id="L245">            ccg = ccg.getSuivant();</span>
<span class="nc" id="L246">          }</span>
        }
        // les créatures.
<span class="nc bnc" id="L249" title="All 2 branches missed.">        while (ccrea !=null) {</span>
<span class="nc" id="L250">          Creature cr = ccrea.getContenu();</span>
<span class="nc" id="L251">          int dir = getDir((ObjetSurCarteAId)cr);</span>
<span class="nc" id="L252">          boolean insecte = true;</span>
<span class="nc" id="L253">          calculerXYTemp(xT,yT,k,c);k++;</span>
          try {
            //System.out.println(ccrea.getContenu().getClass().equals(new Fourmi().getClass()));
<span class="nc" id="L256">            Fourmi f = ((Fourmi)ccrea.getContenu());</span>
<span class="nc bnc" id="L257" title="All 2 branches missed.">            if(f.getStade()==0){</span>
<span class="nc" id="L258">              g.drawImage(Main.getData().getTIF()[dir][math.min(f.getFourmiliere().getId()-1,lenTIF)],xTemp,yTemp,this);</span>
<span class="nc bnc" id="L259" title="All 2 branches missed.">            }else if(f.getStade()==-1){</span>
<span class="nc" id="L260">              g.drawImage(Main.getData().getTF()[dir][2],xTemp,yTemp,this);</span>
<span class="nc bnc" id="L261" title="All 2 branches missed.">            }else if(f.getStade()==-2){</span>
<span class="nc" id="L262">              g.drawImage(Main.getData().getTF()[dir][1],xTemp,yTemp,this);</span>
            }else{ //stade == -3
<span class="nc" id="L264">              g.drawImage(Main.getData().getTF()[dir][0],xTemp,yTemp,this);</span>
            }
<span class="nc" id="L266">            insecte=false;</span>
<span class="nc" id="L267">          }catch (Exception e) {</span>
            try {
<span class="nc" id="L269">              Insecte i = (Insecte)(ccrea.getContenu());</span>
<span class="nc" id="L270">              g.drawImage(Main.getData().getTII()[dir][math.min(i.getType(),Main.getData().getTII()[dir].length)],xTemp,yTemp,this);</span>
<span class="nc" id="L271">            }catch (Exception e2) {erreur.erreur(&quot;impossible de dessiner l'image de la case : &quot;+x+&quot; &quot;+y);}</span>
<span class="nc" id="L272">          }</span>
          //les icone
<span class="nc bnc" id="L274" title="All 2 branches missed.">          if(cr.getEstMort()){drawIcone(g,3,xT,yT,tC2);}</span>
<span class="nc bnc" id="L275" title="All 4 branches missed.">          else if(fi!=null &amp;&amp; cr.getEstAllié(fi)){drawIcone(g,0,xT,yT,tC2);}</span>
<span class="nc bnc" id="L276" title="All 6 branches missed.">          else if(fi!=null &amp;&amp; cr.getEstEnnemi(fi) &amp;&amp; !insecte){drawIcone(g,2,xT,yT,tC2);}</span>
<span class="nc" id="L277">          else {drawIcone(g,1,xT,yT,tC2);}</span>
<span class="nc" id="L278">          ccrea=ccrea.getSuivant();</span>
<span class="nc" id="L279">        }</span>
      }
<span class="nc" id="L281">    }catch (Exception e) {</span>
<span class="nc" id="L282">      erreur.erreur(&quot;impossible de dessiner l'image de la Case : &quot;+x+&quot; &quot;+y);</span>
<span class="nc" id="L283">    }</span>
<span class="nc" id="L284">  }</span>
  /**
  *{@summary fonction that place ObjetSurCarteAId on the same Case.}&lt;br&gt;
  *It modify PanneauCarte value xTemp and yTemp.
  *@version 1.x
  */
  public void calculerXYTemp(int xT, int yT, int k, Case c){
<span class="nc" id="L291">    int deplacementEnX=0;</span>
<span class="nc" id="L292">    int deplacementEnY=0;</span>
    //deplacement centré.
<span class="nc" id="L294">    int espaceLibre = Main.getData().getTailleDUneCase()/5;</span>
<span class="nc bnc" id="L295" title="All 8 branches missed.">    if(Main.getPositionCase()==0 || (Main.getPositionCase()==2 &amp;&amp; (k&gt;3 || c.getGc().length()+c.getGg().length()==1))){//si on est en mode 2 et que la fourmi est seule ou qu'il y en a plus de 4.</span>
<span class="nc" id="L296">      deplacementEnX=espaceLibre/2;</span>
<span class="nc" id="L297">      deplacementEnY=espaceLibre/2;</span>
      //deplacement alléatoire
<span class="nc bnc" id="L299" title="All 2 branches missed.">    }else if(Main.getPositionCase()==1){</span>
<span class="nc" id="L300">      deplacementEnX=allea.getAlléa(espaceLibre);</span>
<span class="nc" id="L301">      deplacementEnY=allea.getAlléa(espaceLibre);</span>
      //deplacement dans un angle.
<span class="nc bnc" id="L303" title="All 2 branches missed.">    }else if(Main.getPositionCase()==2){</span>
      //on ne modifie que si c'est pas 0.
<span class="nc bnc" id="L305" title="All 2 branches missed.">      if(k==1){</span>
<span class="nc" id="L306">        deplacementEnX=espaceLibre;</span>
<span class="nc" id="L307">        deplacementEnY=espaceLibre;</span>
<span class="nc bnc" id="L308" title="All 2 branches missed.">      }else if(k==2){</span>
<span class="nc" id="L309">        deplacementEnY=espaceLibre;</span>
<span class="nc bnc" id="L310" title="All 2 branches missed.">      }else if(k==3){</span>
<span class="nc" id="L311">        deplacementEnX=espaceLibre;</span>
      }//au milieu si on a déja quelqu'1 dans chaque coin.
    }
<span class="nc" id="L314">    xTemp = xT+deplacementEnX;</span>
<span class="nc" id="L315">    yTemp = yT+deplacementEnY;</span>
<span class="nc" id="L316">  }</span>
  /**
  *{@summary Draw an anthill mark.}&lt;br&gt;
  *@version 1.x
  */
  public void drawRondOuRect(int x, int y, int tailleDUneCase, Graphics2D g, Fourmiliere fere, int tailleDuCercle){
<span class="nc bnc" id="L322" title="All 2 branches missed.">    if(tailleDuCercle&lt;tailleDUneCase/2){</span>
<span class="nc" id="L323">      drawRond(x,y,tailleDUneCase,g,fere,tailleDuCercle);</span>
    }else{
<span class="nc" id="L325">      g.setColor(fere.getPh().getColor());</span>
<span class="nc" id="L326">      g.fillRect(x,y,tailleDUneCase,tailleDUneCase);</span>
<span class="nc" id="L327">      setLigne(g);//retour au paramètres par défaut.</span>
    }
<span class="nc" id="L329">  }</span>
  /**
  *{@summary Draw a circle as an anthill mark.}&lt;br&gt;
  *@version 1.x
  */
  public void drawRond(int x, int y, int r, Graphics2D g, Fourmiliere fere, int tailleDuCercle){
<span class="nc" id="L335">    g.setColor(fere.getPh().getColor());</span>
<span class="nc" id="L336">    BasicStroke line = new BasicStroke(tailleDuCercle);</span>
<span class="nc" id="L337">    g.setStroke(line);</span>
<span class="nc" id="L338">    g.drawOval(x+tailleDuCercle/2,y+tailleDuCercle/2,r-tailleDuCercle,r-tailleDuCercle);</span>
<span class="nc" id="L339">    setLigne(g);//retour au paramètres par défaut.</span>
<span class="nc" id="L340">  }</span>
  /**
  *{@summary Draw an icone.}&lt;br&gt;
  *@param iconeId the icone id to load the good image.
  *@param xT x value to use.
  *@param yT y value to use.
  *@param xOffset offset in x.
  *@version 1.x
  */
  public void drawIcone(Graphics g, int iconeId, int xT, int yT, int xOffset){
<span class="nc bnc" id="L350" title="All 2 branches missed.">    if (!Main.getDessinerIcone()){ return;}</span>
<span class="nc" id="L351">    g.drawImage(Main.getData().getB()[iconeId],xT+xOffset,yT,this);</span>
<span class="nc" id="L352">  }</span>
  public int getDir(ObjetSurCarteAId obj){
<span class="nc bnc" id="L354" title="All 2 branches missed.">    if (!Main.getElementSurCarteOrientéAprèsDéplacement()){return 0;}// si la direction de l'objet n'est pas prise en compte on cherche dans le tableau 0.</span>
<span class="nc" id="L355">    int x = obj.getDirection();</span>
<span class="nc bnc" id="L356" title="All 4 branches missed.">    if(x==1 || x==2){ return 0;}</span>
<span class="nc bnc" id="L357" title="All 4 branches missed.">    if(x==3 || x==6){ return 1;}</span>
<span class="nc bnc" id="L358" title="All 4 branches missed.">    if(x==9 || x==8){ return 2;}</span>
<span class="nc" id="L359">    return 3;</span>
  }

  public void actualiserSize(){
<span class="nc" id="L363">    GCase gc = Main.getGc();</span>
<span class="nc" id="L364">    xCase = gc.getNbrX();</span>
<span class="nc" id="L365">    yCase = gc.getNbrY();</span>
<span class="nc" id="L366">    int xTemp = Main.getData().getTailleDUneCase()*xCase;</span>
<span class="nc" id="L367">    int yTemp = Main.getData().getTailleDUneCase()*yCase;</span>
<span class="nc" id="L368">    super.setSize(xTemp,yTemp);</span>
<span class="nc" id="L369">  }</span>

  public void setDesc(String s){
<span class="nc bnc" id="L372" title="All 2 branches missed.">    if(Main.getPp().getPj()==null){ erreur.erreur(&quot;pj null&quot;);}</span>
    try {
<span class="nc" id="L374">      Main.getPp().getPj().getPb().setDesc(s);</span>
<span class="nc" id="L375">    }catch (Exception e) {</span>
<span class="nc" id="L376">      erreur.alerte(&quot;Impossible de setDesc pour la carte.&quot;);</span>
<span class="nc" id="L377">    }</span>
<span class="nc" id="L378">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>