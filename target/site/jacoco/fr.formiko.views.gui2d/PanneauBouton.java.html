<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PanneauBouton.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Formiko</a> &gt; <a href="index.source.html" class="el_package">fr.formiko.views.gui2d</a> &gt; <span class="el_source">PanneauBouton.java</span></div><h1>PanneauBouton.java</h1><pre class="source lang-java linenums">package fr.formiko.views.gui2d;

import fr.formiko.formiko.*;
import fr.formiko.usuel.debug;
import fr.formiko.usuel.erreur;
import fr.formiko.usuel.g;
import fr.formiko.usuel.images.image;
import fr.formiko.usuel.listes.*;
import fr.formiko.usuel.maths.math;

import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.geom.AffineTransform;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

public class PanneauBouton extends Panneau {
  private PanneauZoom pz;
  private PanneauAction pa;
  private PanneauActionSup pas;
  private PanneauActionInf pai;
  private PanneauTInt pti;
  private PanneauTBoolean ptb;
  private String descS;
  private Desc desc;
  private Desc descTI;
  private int actionF;
  private int choixId;
  private PanneauChamp pchamp;
  private PanneauInfo pi;
  private PanneauInfo pij;
  // CONSTRUCTEUR ---------------------------------------------------------------
<span class="nc" id="L39">  public PanneauBouton(){}</span>
  public void construire(){
<span class="nc" id="L41">    setLayout(null);</span>
<span class="nc" id="L42">    descS=&quot;&quot;; desc = new Desc();</span>
<span class="nc" id="L43">    actionF = -1; choixId = -1;</span>
<span class="nc" id="L44">    int t [] = {0,1,2,3,4,5};</span>
<span class="nc" id="L45">    ptb = new PanneauTBoolean(null);</span>
<span class="nc" id="L46">    pti = new PanneauTInt(null,this);</span>
<span class="nc" id="L47">    pa = new PanneauAction();</span>
<span class="nc" id="L48">    pas = new PanneauActionSup();</span>
<span class="nc" id="L49">    pai = new PanneauActionInf();</span>
<span class="nc" id="L50">    pi = new PanneauInfo();</span>
<span class="nc" id="L51">    pij = new PanneauInfo();</span>
<span class="nc" id="L52">    pz = new PanneauZoom();</span>
<span class="nc" id="L53">    add(pi);add(pij);</span>
<span class="nc" id="L54">    descTI = new Desc();</span>
<span class="nc" id="L55">    setDescTI(&quot;&quot;);</span>
<span class="nc" id="L56">    setDesc(&quot;&quot;);</span>
<span class="nc" id="L57">    descTI.setBounds(0,0,800);</span>
    // on ajoute les éléments non visible. Les éléments visible sont add 1 a 1 quand le besoin ce fait sentir.
<span class="nc" id="L59">    add(descTI);</span>
<span class="nc" id="L60">    add(desc);</span>
<span class="nc" id="L61">    add(pz);</span>
<span class="nc" id="L62">  }</span>
  // GET SET -------------------------------------------------------------------
<span class="nc" id="L64">  public String getDesc(){return descS;}</span>
  public void setDesc(String s){
<span class="nc bnc" id="L66" title="All 4 branches missed.">    if(Main.getPe()==null || !Main.getPe().getVisible()){</span>
<span class="nc" id="L67">      descS=s;</span>
<span class="nc" id="L68">      actualiserDesc();</span>
    }
<span class="nc" id="L70">  }</span>
<span class="nc" id="L71">  public int getActionF(){ return actionF;}</span>
<span class="nc" id="L72">  public void setActionF(int x){ actionF=x;}</span>
  //public void setActionF(int x){ if(Main.getPac().getEstBoutonActif(x)){actionF=x;}else{erreur.alerte(&quot;L'action &quot;+x+&quot; n'est pas dans les actions faisable.&quot;,&quot;PanneauBouton.setActionF&quot;,&quot;l'action n'est pas prise en compte.&quot;);}}
<span class="nc" id="L74">  public PanneauTInt getPti(){ return pti;}</span>
<span class="nc" id="L75">  public void setPti(PanneauTInt p){pti=p; }</span>
<span class="nc" id="L76">  public int getChoixId(){ return choixId;}</span>
<span class="nc" id="L77">  public void setChoixId(int x){ choixId=x;}</span>
<span class="nc" id="L78">  public Desc getDescTI(){ return descTI;}</span>
<span class="nc" id="L79">  public void setDescTI(String s){descTI.setTexte(s);}</span>
<span class="nc" id="L80">  public PanneauZoom getPz(){ return pz;}</span>
<span class="nc" id="L81">  public PanneauAction getPa(){ return pa;}</span>
<span class="nc" id="L82">  public PanneauChamp getPChamp(){ return pchamp;}</span>
<span class="nc" id="L83">  public PanneauInfo getPi(){ return pi;}</span>
<span class="nc" id="L84">  public PanneauInfo getPij(){ return pij;}</span>
<span class="nc" id="L85">  public PanneauTBoolean getPTB(){ return ptb;}</span>
  // Fonctions propre -----------------------------------------------------------
  public void addPz(){
<span class="nc" id="L88">    remove(pz);</span>
<span class="nc" id="L89">    pz = new PanneauZoom();</span>
<span class="nc" id="L90">    pz.construire();</span>
<span class="nc" id="L91">    int x = pz.getTailleBouton()*3;</span>
<span class="nc" id="L92">    pz.setBounds(getWidth()-x,0,x,x);</span>
<span class="nc" id="L93">    pz.setOpaque(false);</span>
<span class="nc" id="L94">    add(pz);</span>
<span class="nc" id="L95">  }</span>
  public void removePz(){
<span class="nc" id="L97">    remove(pz);</span>
<span class="nc" id="L98">  }</span>
  public void addPti(int t[],int x){
<span class="nc" id="L100">    addPti(t,g.get(&quot;pti.desc.&quot;+x));</span>
<span class="nc" id="L101">  }</span>
  public void addPti(int t[], String s){
<span class="nc" id="L103">    pti=new PanneauTInt(t,s);</span>
<span class="nc" id="L104">    pti.setBounds(Main.getWidth()-pti.getXPi(),Main.getHeight()-pti.getYPi(),pti.getXPi(),pti.getYPi());</span>
<span class="nc" id="L105">    debug.débogage(&quot;le composants pti a été placé en 0 Desc.getDimY() avec pour dimention : &quot;+pti.getXPi()+&quot; &quot;+pti.getYPi());</span>
<span class="nc" id="L106">    add(pti);</span>
<span class="nc" id="L107">  }</span>
  public void removePti(){
<span class="nc" id="L109">    remove(pti);</span>
<span class="nc" id="L110">  }</span>
  public void addPTB(String message){
<span class="nc" id="L112">    ptb=new PanneauTBoolean(g.get(message));</span>
<span class="nc" id="L113">    ptb.setBounds(0,Desc.getDimY(),ptb.getXPi(),ptb.getYPi());</span>
<span class="nc" id="L114">    add(pti);</span>
<span class="nc" id="L115">  }</span>
  public void removePTB(){
<span class="nc" id="L117">    remove(ptb);</span>
<span class="nc" id="L118">  }</span>
  public synchronized void addPa(int t[]){
    try {
      //remove(pai);
<span class="nc" id="L122">      remove(pa);</span>
<span class="nc" id="L123">      remove(pas);</span>
<span class="nc" id="L124">    }catch (Exception e) {}</span>
<span class="nc" id="L125">    pa = new PanneauAction(t);</span>
<span class="nc" id="L126">    pa.construire();</span>
<span class="nc" id="L127">    int xxx = pa.getTailleBouton();</span>
<span class="nc" id="L128">    pa.setBounds(0,getHeight()-pa.getHeight(),pa.getWidth(),pa.getHeight());</span>
<span class="nc" id="L129">    pas = new PanneauActionSup();</span>
<span class="nc" id="L130">    pas.setBounds(0,getHeight()-pas.getHeight(),pas.getWidth(),pas.getHeight());</span>
    //PanneauActionInf paiPrécédent = pai;
<span class="nc" id="L132">    pai = new PanneauActionInf();</span>
<span class="nc" id="L133">    pai.setBounds(0,getHeight()-pai.getHeight(),pai.getWidth(),pai.getHeight());</span>
<span class="nc" id="L134">    Main.getPs().actualiserTaille();</span>
<span class="nc" id="L135">    add(pas);</span>
<span class="nc" id="L136">    add(pa);</span>
<span class="nc" id="L137">    add(pai);</span>
<span class="nc" id="L138">    setVisiblePa(true);</span>
    /*try {
      remove(paiPrécédent);
    }catch (Exception e) {}*/
<span class="nc" id="L142">    revalidate();</span>
<span class="nc" id="L143">    Main.repaint();</span>
<span class="nc" id="L144">  }public void addPA(int t[]){addPa(t);}</span>
  public void setVisiblePa(boolean b){
<span class="nc" id="L146">    pa.setVisible(b);</span>
<span class="nc" id="L147">    pas.setVisible(b);</span>
    //pai.setVisible(b);
<span class="nc" id="L149">  }</span>
  public void removePa(){
<span class="nc" id="L151">    remove(pa);</span>
<span class="nc" id="L152">    remove(pas);</span>
<span class="nc" id="L153">    remove(pai);</span>
<span class="nc" id="L154">  }public void removePA(){removePa();}</span>
<span class="nc" id="L155">  public void addPA(){ int t [] = {0,1,2,3,4,5,6,7}; addPA(t);}</span>
  /*public void modPa(){
    remove(pa);
    pa = new PanneauAction(Main.getPlayingAnt().getTActionFourmi());
    pa.construire();
    add(pa);
    revalidate();
    Main.repaint();
  }*/
  public void addPChamp(String défaut,String message){
<span class="nc" id="L165">    setDescTI(message);</span>
<span class="nc" id="L166">    pchamp = new PanneauChamp(défaut);</span>
<span class="nc" id="L167">    pchamp.setBounds(0,Desc.getDimY(),540,Desc.getDimY());</span>
<span class="nc" id="L168">    add(pchamp);</span>
<span class="nc" id="L169">    validate();</span>
<span class="nc" id="L170">  }</span>
<span class="nc" id="L171">  public void removePChamp(){ remove(pchamp);setDescTI(&quot;&quot;);}</span>
  public void addPI(){
    try {
<span class="nc" id="L174">      removePi();</span>
<span class="nc" id="L175">    }catch (Exception e) {}</span>
<span class="nc" id="L176">    debug.débogage(&quot;addPI()&quot;);</span>
<span class="nc" id="L177">    pi = new PanneauInfo(Main.getPlayingAnt(),Main.getTailleElementGraphiqueX(320));</span>
<span class="nc" id="L178">    int xx2 = pz.getTailleBouton()*3;</span>
<span class="nc" id="L179">    debug.débogage(&quot;initialisation du PanneauInfo en &quot;+(getWidth()-Main.getTailleElementGraphiqueX(320))+&quot; &quot;+Main.getTailleElementGraphiqueX(320));</span>
<span class="nc" id="L180">    pi.setBounds(getWidth()-Main.getTailleElementGraphiqueX(320),xx2,Main.getTailleElementGraphiqueX(320),pi.getYPi());</span>
<span class="nc" id="L181">    add(pi);</span>
<span class="nc" id="L182">  }</span>
<span class="nc" id="L183">  public void removePi(){ remove(pi);}</span>
  public void addPIJ(){
    //removePij();
<span class="nc" id="L186">    Fourmi ft = Main.getPlayingAnt();</span>
<span class="nc bnc" id="L187" title="All 2 branches missed.">    if (ft==null){ return;}</span>
<span class="nc" id="L188">    GString gs = ft.getFourmiliere().getJoueur().getGm().gmToGs(Main.getNbrMessageAfficher());</span>
<span class="nc" id="L189">    debug.débogage(&quot;affichage console du contenu de gs&quot;);</span>
<span class="nc" id="L190">    debug.débogage(&quot;&quot;);</span>
<span class="nc" id="L191">    pij = new PanneauInfo(gs);</span>
<span class="nc" id="L192">    add(pij);</span>
<span class="nc" id="L193">    int xx = pz.getTailleBouton()*5;</span>
<span class="nc" id="L194">    debug.débogage(&quot;initialisation du PanneauInfoJoueur en &quot;+(getWidth()-xx)+&quot; &quot;+(getHeight()-pij.getYPi()));</span>
    //pij.setBounds(getWidth()-xx,xx+pi.getY()*(pi.length()+1),pij.getX(),pij.getY()*pij.length());
<span class="nc" id="L196">    pij.setBounds(getWidth()-xx,getHeight()-pij.getY(),pij.getWidth(),pij.getHeight());</span>
<span class="nc" id="L197">  }</span>
<span class="nc" id="L198">  public void removePij(){ remove(pij);}</span>
  //repaint() permet de réactualisé paintComponent()
  public void paintComponent(Graphics gr){
    // pas mal de satBounds pourrait partir si la fenetre avait une taille fixe.
    try {
<span class="nc bnc" id="L203" title="All 2 branches missed.">      if(!Main.getPartie().getEnCours()){return;}</span>
<span class="nc" id="L204">    }catch (Exception e) {}</span>
    try {
      //debug.g(&quot;PanneauBouton&quot;,getWidth(),getHeight());
<span class="nc" id="L207">      int xxx=0;</span>
      try {
<span class="nc" id="L209">        xxx = pa.getHeight();</span>
<span class="nc" id="L210">      }catch (Exception e) {}</span>
<span class="nc" id="L211">      desc.setSize((int)(desc.getText().length()*Main.getTaillePolice1()*0.6),Desc.getDimY());</span>
<span class="nc" id="L212">      desc.setBounds(0,Main.getDimY()-xxx-desc.getHeight(),desc.getWidth(),desc.getHeight());</span>
<span class="nc" id="L213">      descTI.setBounds(0,0,800);</span>
<span class="nc" id="L214">    }catch (Exception e) {</span>
<span class="nc" id="L215">      erreur.erreur(&quot;affichage de PanneauBouton&quot;);</span>
<span class="nc" id="L216">    }</span>
<span class="nc" id="L217">  }</span>
  public void actualiserDesc(){
<span class="nc" id="L219">    debug.débogage(&quot;actualisation de la description&quot;);</span>
    //int xxx = pa.getTailleBouton();
    //desc.setBounds(0,getHeight()-xxx-Desc.getDimY(),(int)(desc.getText().length()*Main.getTaillePolice1()*0.6),Desc.getDimY());
<span class="nc" id="L222">    desc.setTexte(descS);</span>
    try {
<span class="nc" id="L224">      Main.repaint();</span>
<span class="nc" id="L225">    }catch (Exception e) {}</span>
<span class="nc" id="L226">  }</span>
  public void actualiserDescTI(String s){
<span class="nc" id="L228">    debug.débogage(&quot;actualisation de la descriptionTI&quot;);</span>
    try {
<span class="nc" id="L230">      descTI.setTexte(s);</span>
<span class="nc" id="L231">    }catch (Exception e) {}</span>
<span class="nc" id="L232">  }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>