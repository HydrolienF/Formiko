<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Graine.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Formiko</a> &gt; <a href="index.source.html" class="el_package">fr.formiko.formiko</a> &gt; <span class="el_source">Graine.java</span></div><h1>Graine.java</h1><pre class="source lang-java linenums">package fr.formiko.formiko;

import fr.formiko.formiko.Main;
import fr.formiko.usuel.debug;
import fr.formiko.usuel.erreur;
import fr.formiko.usuel.g;
import fr.formiko.usuel.maths.allea;

import java.io.Serializable;

// TODO Les graines apparaissent surtout en automne (80%) (saison encore a créer.)
public class Graine extends ObjetSurCarteAId implements Serializable{
  private int nourritureFournie;
  private byte dureté; // il faut de bonne mandibule pour pouvoir ouvrir des graines de grande dureté, mais celle si contiène souvent plus de nourriture !
  private boolean ouverte; // une graine ouverte est mangeable.
  private byte type;
  private byte tempsAvantDecomposition;

  // CONSTRUCTEUR ---------------------------------------------------------------
  public Graine(CCase ccase, int nourritureFournie, byte dureté){
<span class="fc" id="L21">    super(ccase); ouverte = false;</span>
<span class="fc" id="L22">    this.nourritureFournie = nourritureFournie; this.dureté = dureté;</span>
<span class="fc" id="L23">    type = (byte) allea.getAlléa(4);//0,1 ou 2.</span>
<span class="fc" id="L24">    tempsAvantDecomposition = (byte)(20 + allea.getAlléa(100));// de 19 a 119</span>
<span class="fc bfc" id="L25" title="All 2 branches covered.">    if(ccase!=null){ccase.getGg().addGraine(this);}</span>
<span class="fc" id="L26">  }</span>
  public Graine(CCase ccase){
<span class="fc" id="L28">    this(ccase,allea.getAlléa(400)+10,(byte) 0);</span>
<span class="fc" id="L29">    setDureté(getNourritureFournie()/10 + allea.getAlléa(80)); // de 1 a 41 + de 0 a 80.</span>
<span class="fc" id="L30">  }</span>
  public Graine(){
<span class="fc" id="L32">    this(Main.getGc().getCCaseAlléa());</span>
<span class="fc" id="L33">  }</span>
  // GET SET --------------------------------------------------------------------
<span class="fc" id="L35">  public int getNourritureFournie(){ return nourritureFournie;}</span>
<span class="nc" id="L36">  public void setNourritureFourie(int x){ nourritureFournie = x;}</span>
<span class="nc" id="L37">  public byte getDureté(){ return dureté;}</span>
<span class="fc" id="L38">  public void setDureté(byte x){ dureté = x;}</span>
<span class="pc bpc" id="L39" title="2 of 4 branches missed.">  public void setDureté(int x){ if(x&lt;-128 || x&gt;127){ erreur.erreur(&quot;byte inoptencible depuis &quot;+x);return;}setDureté((byte)x);}</span>
<span class="fc" id="L40">  public boolean getOuverte(){ return ouverte;}</span>
<span class="nc" id="L41">  public void setOuverte(boolean b){ouverte = b;}</span>
  /**
  *{@summary Move the Graine from a case to an other.}&lt;br&gt;
  *It is used by Deplacement interfaces.&lt;br&gt;
  *It wil try to remove from old CCase and add to new CCase.&lt;br&gt;
  *@version 1.40
  */
  public void setCCase(CCase newCCase){
<span class="fc bfc" id="L49" title="All 2 branches covered.">    if(this.ccase!=null){</span>
<span class="fc" id="L50">      this.ccase.getContenu().getGg().retirer(this);</span>
    }
<span class="fc" id="L52">    this.ccase = newCCase;</span>
<span class="fc bfc" id="L53" title="All 2 branches covered.">    if(newCCase!=null){</span>
<span class="fc" id="L54">      newCCase.getContenu().getGg().add(this);</span>
    }
<span class="fc" id="L56">  }</span>
<span class="nc" id="L57">  public byte getType(){ return type;}</span>
<span class="nc" id="L58">  public byte getTempsAvantDecomposition(){ return tempsAvantDecomposition;}</span>
  // Fonctions propre -----------------------------------------------------------
  public String toString(){
<span class="nc bnc" id="L61" title="All 2 branches missed.">    String adjOuverte; if(ouverte){ adjOuverte = &quot;est ouverte&quot;; }else{ adjOuverte = &quot;est fermée&quot;;}</span>
<span class="nc" id="L62">    String s = &quot;Graine &quot;+id+&quot;, nourritureFournie : &quot;+nourritureFournie+&quot;, dureté : &quot;+dureté+&quot;, &quot;+adjOuverte;</span>
<span class="nc" id="L63">    return s;</span>
  }
  /**
  *{@summary Standard equals function.}
  *Null &amp;#38; other class type proof.
  *@param o o is the Object to test. It can be null or something else than this class.
  *@version 1.31
  */
  @Override
  public boolean equals(Object o){
<span class="pc bpc" id="L73" title="2 of 4 branches missed.">    if(o==null || !(o instanceof Graine)){return false;}</span>
<span class="fc" id="L74">    Graine g = (Graine)o;</span>
<span class="fc bfc" id="L75" title="All 2 branches covered.">    if (getId() == g.getId()){ return true;}</span>
<span class="fc" id="L76">    return false;</span>
  }
  public void mourrir(){
<span class="nc" id="L79">    debug.débogage(&quot;Lancement de la mort de la graine.&quot;);</span>
<span class="nc" id="L80">    Main.getGc().getCCase(ccase.getContenu().getX(),ccase.getContenu().getY()).getGg().retirerGraine(this);//on retire la graine de sa liste.</span>
<span class="nc" id="L81">    this.setCCase(null);</span>
<span class="nc" id="L82">  }</span>
  public void casser(){
<span class="nc" id="L84">    ouverte=true;</span>
<span class="nc" id="L85">  }</span>
  public void tour(){
<span class="nc bnc" id="L87" title="All 2 branches missed.">    if(getCCase().getContenu().getFere()==null){//si la graine n'est pas dans une fourmiliere :</span>
<span class="nc" id="L88">      tempsAvantDecomposition--;</span>
<span class="nc bnc" id="L89" title="All 2 branches missed.">      if(tempsAvantDecomposition&lt;0){mourrir();}//la graine pourrie.</span>
    }
<span class="nc" id="L91">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>