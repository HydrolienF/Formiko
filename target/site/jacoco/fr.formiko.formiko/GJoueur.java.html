<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GJoueur.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Formiko</a> &gt; <a href="index.source.html" class="el_package">fr.formiko.formiko</a> &gt; <span class="el_source">GJoueur.java</span></div><h1>GJoueur.java</h1><pre class="source lang-java linenums">package fr.formiko.formiko;

import fr.formiko.formiko.Main;
import fr.formiko.formiko.Message;
import fr.formiko.usuel.debug;
import fr.formiko.usuel.erreur;
import fr.formiko.usuel.g;
import fr.formiko.usuel.listes.GString;

import java.io.Serializable;

public class GJoueur implements Serializable{
  private CJoueur début, fin;
  // CONSTRUCTEUR -----------------------------------------------------------------
<span class="fc" id="L15">  public GJoueur(){}</span>
  // GET SET -----------------------------------------------------------------------
<span class="fc" id="L17">  public CJoueur getDébut(){return début;}</span>
<span class="nc" id="L18">  public CJoueur getFin(){return fin;}</span>
  public GCreature getGc(){ // renvoie toutes les créatures de tout les joueurs.
<span class="nc bnc" id="L20" title="All 2 branches missed.">    if (début == null){ return new GCreature();}</span>
<span class="nc" id="L21">    return début.getGc();</span>
  }
  public Joueur getJoueurParId(int id){
<span class="pc bpc" id="L24" title="1 of 2 branches missed.">    if(début==null){ return null;}</span>
<span class="fc" id="L25">    return début.getJoueurParId(id);</span>
  }
  public GJoueur getJoueurHumain(){
<span class="pc bpc" id="L28" title="1 of 2 branches missed.">    if(début==null){ return new GJoueur();}</span>
<span class="fc" id="L29">    return début.getJoueurHumain();</span>
  }
<span class="nc" id="L31">  public int getNbrDeJoueurHumain(){ return getJoueurHumain().length();}</span>
<span class="nc" id="L32">  public int getNbrDIa(){ return length() - getJoueurHumain().length();}</span>
  // Fonctions propre -----------------------------------------------------------
  public String toString(){
<span class="fc" id="L35">    String s = g.get(&quot;gj&quot;)+&quot; : &quot;;</span>
<span class="pc bpc" id="L36" title="1 of 2 branches missed.">    if (début == null){ return s+g.get(&quot;vide&quot;);}</span>
<span class="nc" id="L37">    return s+début.toString();</span>
  }
  public int length(){
<span class="fc bfc" id="L40" title="All 2 branches covered.">    if (début == null){ return 0;}</span>
<span class="fc" id="L41">    return début.length(1);</span>
  }
  public Joueur getJoueurNonIa(){
    // renvoie le 1a joueur non humain ou null si il n'y a que des ia.
<span class="nc bnc" id="L45" title="All 2 branches missed.">    if(début == null){ return null;}</span>
<span class="nc bnc" id="L46" title="All 2 branches missed.">    if(début.getJoueur().getIa() == false){ return début.getJoueur();}</span>
<span class="nc" id="L47">    return début.getJoueurNonIa();</span>
  }
  public boolean getPlusDeFourmi(){
<span class="nc bnc" id="L50" title="All 2 branches missed.">    if(début==null){return true;}</span>
<span class="nc" id="L51">    return début.getPlusDeFourmi();</span>
  }
  public GJoueur getGjOrdonné(){
<span class="nc bnc" id="L54" title="All 2 branches missed.">    if(début==null){return new GJoueur();}</span>
<span class="nc" id="L55">    return début.getGjOrdonné();</span>
  }
  public int getNbrDeJoueurVivant(){
<span class="nc bnc" id="L58" title="All 2 branches missed.">    if (début == null){ return 0;}</span>
<span class="nc" id="L59">    return début.getNbrDeJoueurVivant();</span>
  }
  public boolean plusQu1Joueur(){
<span class="nc bnc" id="L62" title="All 2 branches missed.">    if(getNbrDeJoueurVivant()&lt;2){return true;}</span>
<span class="nc" id="L63">    return false;</span>
  }
  public void afficheScore(){
<span class="nc bnc" id="L66" title="All 2 branches missed.">    if(début!=null){</span>
<span class="nc" id="L67">      GString gs = scoreToGString();</span>
<span class="nc" id="L68">      gs.afficheToi();</span>
    }
<span class="nc" id="L70">  }</span>
  public GString scoreToGString(){
<span class="nc bnc" id="L72" title="All 2 branches missed.">    if (début == null){ return new GString();}</span>
<span class="nc" id="L73">    return début.scoreToGString();</span>
  }
  public void addDébut(Joueur j){
<span class="nc" id="L76">    CJoueur cj = new CJoueur(j);</span>
<span class="nc bnc" id="L77" title="All 2 branches missed.">    if (début == null){</span>
<span class="nc" id="L78">      début = cj;</span>
<span class="nc" id="L79">      fin = cj;</span>
<span class="nc" id="L80">      return;</span>
    }
<span class="nc bnc" id="L82" title="All 2 branches missed.">    if (!début.equals(fin) ){</span>
<span class="nc" id="L83">      debug.débogage(&quot;La chaine de joueur actuelle est constitué de &quot; + length()+ &quot; éléments&quot;);</span>
<span class="nc" id="L84">      cj.setSuivant(début); // la liste actuelle est ratachée a la nouvelle CJoueur</span>
<span class="nc" id="L85">      début = cj; // la CJoueur devient la 1a</span>
    } else {
<span class="nc" id="L87">      cj.setSuivant(début);</span>
<span class="nc" id="L88">      début = cj;</span>
<span class="nc" id="L89">      actualiserFin();</span>
    }
<span class="nc" id="L91">  }</span>
  /**
  *{@summary Add a player to the GJoueur.}
  *@version 1.29
  */
  public void add(Joueur j){
<span class="fc" id="L97">    addFin(j);</span>
<span class="fc" id="L98">  }</span>
  public void addFin(Joueur j){
<span class="fc" id="L100">    CJoueur cj = new CJoueur(j);</span>
<span class="fc bfc" id="L101" title="All 2 branches covered.">    if(fin == null){</span>
<span class="fc" id="L102">      début = cj;</span>
<span class="fc" id="L103">      fin = cj;</span>
<span class="pc bpc" id="L104" title="1 of 2 branches missed.">    }else if (début.equals(fin)){</span>
<span class="fc" id="L105">      fin = cj;</span>
<span class="fc" id="L106">      début.setSuivant(fin);</span>
    }else{
<span class="nc" id="L108">      fin.setSuivant(cj);</span>
<span class="nc" id="L109">      fin = cj;</span>
    }
<span class="fc" id="L111">  }</span>
  //TODO #231 should place j depending of it score. (just before the 1a player that have a lower score.)
  public void addOrdonnée(Joueur j){
<span class="nc bnc" id="L114" title="All 2 branches missed.">    if(début==null){add(j);}//le cas ou on a 0 éléments dans la liste.</span>
<span class="nc bnc" id="L115" title="All 2 branches missed.">    else if(début.equals(fin)){//le cas ou on a 1 seul élément dans la liste</span>
<span class="nc bnc" id="L116" title="All 2 branches missed.">      if(début.getContenu().getScore()&gt;=j.getScore()){</span>
<span class="nc" id="L117">        addFin(j);</span>
      }else{
<span class="nc" id="L119">        addDébut(j);</span>
      }
    }else{
<span class="nc bnc" id="L122" title="All 2 branches missed.">      if(début.getContenu().getScore()&gt;=j.getScore()){</span>
<span class="nc" id="L123">        début.addOrdonnée(j);</span>
      }else{
<span class="nc" id="L125">        addDébut(j);</span>
      }
    }
<span class="nc" id="L128">    actualiserFin();</span>
<span class="nc" id="L129">  }</span>
  public void actualiserFin(){
<span class="nc" id="L131">    fin = début;</span>
<span class="nc bnc" id="L132" title="All 2 branches missed.">    while(fin.getSuivant()!=null){</span>
<span class="nc" id="L133">      fin = fin.getSuivant();</span>
    }
<span class="nc" id="L135">  }</span>
  public void retirer(Joueur j){
<span class="nc bnc" id="L137" title="All 2 branches missed.">    if (début != null){</span>
<span class="nc bnc" id="L138" title="All 2 branches missed.">      if(début.getContenu() == j){</span>
<span class="nc" id="L139">        début = début.getSuivant();</span>
      }else {
<span class="nc" id="L141">        début.retirer(j);</span>
      }
    }
<span class="nc" id="L144">    erreur.erreur(&quot;Le joueur &quot;+j.getId()+&quot; n'as pas pue être retiré&quot;);</span>
<span class="nc" id="L145">  }</span>
  public void jouer(){
<span class="nc bnc" id="L147" title="All 2 branches missed.">    if(début == null){</span>
<span class="nc" id="L148">      erreur.erreur(&quot;Impossible de faire jouer un groupe de joueur vide !&quot;);</span>
    }else{
<span class="nc bnc" id="L150" title="All 4 branches missed.">      if(Main.getPartie()!=null &amp;&amp; !Main.getPartie().getContinuerLeJeu()){return;}</span>
<span class="nc" id="L151">      début.jouer();</span>
    }
<span class="nc" id="L153">  }</span>
  public void addMessage(Message m){
<span class="nc bnc" id="L155" title="All 2 branches missed.">    if(début==null){return;}</span>
<span class="nc" id="L156">    début.addMessage(m);</span>
<span class="nc" id="L157">  }</span>
  public void initialisationCaseNS(){
<span class="nc bnc" id="L159" title="All 2 branches missed.">    if(début==null){return;}</span>
<span class="nc" id="L160">    début.initialisationCaseNS();</span>
<span class="nc" id="L161">  }</span>
  public void enregistrerLesScores(){
<span class="nc bnc" id="L163" title="All 2 branches missed.">    if(début==null){return;}</span>
<span class="nc" id="L164">    début.enregistrerLesScores();</span>
<span class="nc" id="L165">  }</span>
  public void prendreEnCompteLaDifficulté(){
<span class="nc bnc" id="L167" title="All 2 branches missed.">    if(début==null){return;}</span>
<span class="nc" id="L168">    début.prendreEnCompteLaDifficulté();</span>
<span class="nc" id="L169">  }</span>
  public void setAction0AndEndTurn(){
<span class="nc bnc" id="L171" title="All 2 branches missed.">    if(début==null){return;}</span>
<span class="nc" id="L172">    début.setAction0AndEndTurn();</span>
<span class="nc" id="L173">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>