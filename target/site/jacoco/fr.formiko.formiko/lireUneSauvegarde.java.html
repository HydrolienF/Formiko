<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>lireUneSauvegarde.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Formiko</a> &gt; <a href="index.source.html" class="el_package">fr.formiko.formiko</a> &gt; <span class="el_source">lireUneSauvegarde.java</span></div><h1>lireUneSauvegarde.java</h1><pre class="source lang-java linenums">package fr.formiko.formiko;

import fr.formiko.formiko.Main;
import fr.formiko.usuel.debug;
import fr.formiko.usuel.decoderUnFichier;
import fr.formiko.usuel.erreur;
import fr.formiko.usuel.g;
import fr.formiko.usuel.lireUnFichier;
import fr.formiko.usuel.types.*;

<span class="nc" id="L11">public class lireUneSauvegarde {</span>
  public static void lireUneSauvegarde(String nomDuFichier){
<span class="nc" id="L13">    erreur.erreur(&quot;Le système de lecture des sauvegardes n'est pas a jour !&quot;,true);</span>
    /*
    // On récupère les donnes du fichier sous la forme d'un tableau de Str. 1 par ligne.
    String donnéeSauvegardée [] = lireUnFichier.lireUnFichier(nomDuFichier);
    if (donnéeSauvegardée.length == 0) {
      erreur.erreur(&quot;La sauvegarde est vide !&quot;,&quot;Main.lireUneSauvegarde&quot;,true);
    }
    if (donnéeSauvegardée.length &lt; 2) {
      erreur.erreur(&quot;La sauvegarde est incomplète !&quot;,&quot;Main.lireUneSauvegarde&quot;,true);
    }
    int k = 0;
    int version = decoderUnFichier.getIntDeLaLigne(donnéeSauvegardée[k]); k++;
    if (version == Main.getVersionActuelle()){
      // toutes la récupération des données du jeux.
      int nbrDeTour = decoderUnFichier.getIntDeLaLigne(donnéeSauvegardée[k]); k++;
      // Création de la carte
      int g1 [][] = decoderUnFichier.getTableauTableauIntDeLaLigne(donnéeSauvegardée[k]); k++;
      //Main.setG(new Grille (g1));

      GInsecte gi;
      Joueur listeJoueur [];
      // Création du tableau de joueur
      int nombreDeJoueur = decoderUnFichier.getIntDeLaLigne(donnéeSauvegardée[k]); k++;
      int joueur = 0; //System.out.println(k);//k = 4
      GJoueur gj = new GJoueur();
      while (joueur &lt; nombreDeJoueur){
        debug.débogage(&quot;k = &quot;+k);
        // Création du joueurs
        String joueurJ [] = decoderUnFichier.getObjet(donnéeSauvegardée[k]); k++;
        boolean estIa = decoderUnFichier.getBoolean(joueurJ[1]);
        // Création de la fourmilière de chaque joueurs
        Fourmiliere gf = new Fourmiliere(null); // null doit etre un joueur.
        String tFourmiliere [] = decoderUnFichier.getObjet(donnéeSauvegardée[k]); System.out.println(&quot;k = &quot;+k);k++;
        gf.setP(new Point (ent.ent(tFourmiliere[0]), ent.ent(tFourmiliere[1])));
        int nbrDeFourmi = ent.ent(tFourmiliere[2]);
        int i;
        for (i=0; i&lt;nbrDeFourmi;i++){
          // Création de chaque Fourmi
          String ts [] = decoderUnFichier.getObjet(donnéeSauvegardée[k+i]);
          if (ts.length !=9){
            erreur.erreur(&quot;La fourmi ne possède pas le bon nombre de variable&quot;,&quot;Main.lireUneSauvegarde&quot;,true);
          }
          Fourmi fm = new Fourmi (new Point(ent.ent(ts[0]),  ent.ent(ts[1])),  ent.ent(ts[2]),  ent.ent(ts[3]),  ts[4], ent.ent(ts[5]), ent.ent(ts[6]), ent.ent(ts[7]), ent.ent(ts[8]) );
          gf = new Fourmiliere (gf,fm);
        }
        gj.add(new Joueur (gf, joueurJ [0], estIa ));
        debug.débogage(&quot;ajout d'1 joueur&quot;);
        k=k+i; // On a passer i Foumis
        gf.afficheToi();
        joueur++;
      }
      // Création du tableau d'insecte
       gi = new GInsecte ();
       System.out.println(k);
       int nombreDInsecte = decoderUnFichier.getIntDeLaLigne(donnéeSauvegardée[k]); k++;
       for (int i=0; i&lt;nombreDInsecte;i++){
        // Création de chaque insecte
        String ts [] = decoderUnFichier.getObjet(donnéeSauvegardée[k+i]);
        if (ts.length !=6){
          erreur.erreur(&quot;L'Insecte ne possède pas le bon nombre de variable&quot;,&quot;Main.lireUneSauvegarde&quot;,true);
        }
        Insecte cr = new Insecte (new Point(ent.ent(ts[0]),  ent.ent(ts[1])),  ent.ent(ts[2]),  ent.ent(ts[3]),  ent.ent(ts[4]),  ent.ent(ts[5]));
        gi.addUneCreature(cr);
        debug.débogage(&quot;Ajout d'1 insecte&quot;);
      }

      // On initialise toutes les valeurs des créatures et on lance le jeu.
      Main.setGi(gi);
      debug.débogage(&quot;Ajout dans Main de &quot; + gj.length() +&quot; joueurs&quot;);
      gj.afficheToi();
      Main.setGj(gj);
      Main.setNbrDeTour(nbrDeTour); // A modifier
      Main.jeu();
    } else {
      erreur.erreur(&quot;La sauvegarde n'est pas compatible avec la version du jeu.&quot;,&quot;Main.lireUneSauvegarde&quot;);
    }*/
<span class="nc" id="L89">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>