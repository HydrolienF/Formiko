<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Pheromone.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Formiko</a> &gt; <a href="index.source.html" class="el_package">fr.formiko.formiko</a> &gt; <span class="el_source">Pheromone.java</span></div><h1>Pheromone.java</h1><pre class="source lang-java linenums">package fr.formiko.formiko;

import fr.formiko.formiko.Main;
import fr.formiko.usuel.ascii;
import fr.formiko.usuel.debug;
import fr.formiko.usuel.erreur;
import fr.formiko.usuel.g;
import fr.formiko.usuel.maths.allea;

import java.awt.Color;
import java.io.Serializable;

public class Pheromone implements Serializable{
  private byte r;
  private byte v;
  private byte b;
  // CONSTRUCTEUR ---------------------------------------------------------------
<span class="fc" id="L18">  public Pheromone(byte r, byte v, byte b){</span>
<span class="fc" id="L19">    this.r = r; this.v = v; this.b = b;</span>
<span class="fc" id="L20">  }</span>
  public Pheromone(int r, int v, int b){
<span class="fc" id="L22">    this((byte)r,(byte)v,(byte)b);</span>
<span class="fc" id="L23">  }</span>
  public Pheromone(Pheromone fo, byte x){
<span class="fc" id="L25">    this(allea.fluctuerBrute(fo.getR(),x),allea.fluctuerBrute(fo.getV(),x),allea.fluctuerBrute(fo.getB(),x));</span>
<span class="fc" id="L26">  }</span>
  public Pheromone(Pheromone fo){
<span class="fc" id="L28">    this(fo,(byte)2); // par défaut les Pheromones fluctuent de 2 maximum.(6 pour une Reine fille).</span>
<span class="fc" id="L29">  }</span>
  public Pheromone(String s){
<span class="nc" id="L31">    this(getXFromS(s.substring(0,2))-128,getXFromS(s.substring(2,4))-128,getXFromS(s.substring(4,6))-128);</span>
<span class="nc" id="L32">  }</span>
  public Pheromone(){
<span class="fc" id="L34">    this(allea.getAlléa(256)-128,allea.getAlléa(256)-128,allea.getAlléa(256)-128);</span>
<span class="fc" id="L35">  }</span>
  // GET SET --------------------------------------------------------------------
<span class="fc" id="L37">  public byte getR(){ return r;}</span>
<span class="pc" id="L38">  public byte getV(){ return v;}public byte getG(){ return v;}</span>
<span class="fc" id="L39">  public byte getB(){ return b;}</span>
<span class="nc" id="L40">  public void setR(byte x){r=x;}</span>
<span class="nc" id="L41">  public void setV(byte x){r=v;}public void setG(byte x){r=v;}</span>
<span class="nc" id="L42">  public void setB(byte x){r=b;}</span>
<span class="nc" id="L43">  public byte getRc(){ return (byte)(r+128);}</span>
<span class="nc" id="L44">  public byte getVc(){ return (byte)(v+128);}</span>
<span class="nc" id="L45">  public byte getBc(){ return (byte)(b+128);}</span>
<span class="nc" id="L46">  public Color getColor(){ return new Color(r+128,v+128,b+128);}</span>
  // Fonctions propre -----------------------------------------------------------
  public String toString(){
<span class="fc" id="L49">    return r+&quot; &quot;+v+&quot; &quot;+b;</span>
  }
  public void afficheToi(){
<span class="nc" id="L52">    System.out.println(this);</span>
<span class="nc" id="L53">  }</span>
  /**
  *{@summary Standard equals function.}
  *Null &amp;#38; other class type proof.
  *@param o o is the Object to test. It can be null or something else than this class.
  *@version 1.31
  */
  @Override
  public boolean equals(Object o){
<span class="nc bnc" id="L62" title="All 4 branches missed.">    if(o==null || !(o instanceof Pheromone)){return false;}</span>
<span class="nc" id="L63">    Pheromone ph = (Pheromone)o;</span>
<span class="nc" id="L64">    return equals(ph,1);</span>
  }
  @Override
<span class="nc" id="L67">  public int hashCode(){return getR()+getG()*1000+getB()*1000000;}</span>
  /**
  *{@summary special equals function.}
  *@version 1.31
  */
  public boolean equals(Pheromone ph, int ndifferenceTollere){
<span class="fc bfc" id="L73" title="All 2 branches covered.">    if(ndifferenceTollere&lt;1){return false;}</span>
    // si 7 &lt; 3 - 5
    // si 7 &gt; 3 + 5
<span class="fc bfc" id="L76" title="All 2 branches covered.">    if (this.getR() &lt;= ph.getR() - ndifferenceTollere){ return false;}</span>
<span class="fc bfc" id="L77" title="All 2 branches covered.">    if (this.getR() &gt;= ph.getR() + ndifferenceTollere){ return false;}</span>
<span class="fc bfc" id="L78" title="All 2 branches covered.">    if (this.getB() &lt;= ph.getB() - ndifferenceTollere){ return false;}</span>
<span class="fc bfc" id="L79" title="All 2 branches covered.">    if (this.getB() &gt;= ph.getB() + ndifferenceTollere){ return false;}</span>
<span class="pc bpc" id="L80" title="1 of 2 branches missed.">    if (this.getV() &lt;= ph.getV() - ndifferenceTollere){ return false;}</span>
<span class="pc bpc" id="L81" title="1 of 2 branches missed.">    if (this.getV() &gt;= ph.getV() + ndifferenceTollere){ return false;}</span>
<span class="fc" id="L82">    return true;</span>
  }
  public static int getXFromS(String s){
<span class="nc bnc" id="L85" title="All 2 branches missed.">    if (s.length()!=2){ erreur.alerte(&quot;un code couleur n'as pas pu être transformer &quot;+s+&quot;.  Il sera remplacer par un code alléatoire&quot;); return allea.getAlléa(256);}</span>
<span class="nc" id="L86">    return b16ToB10(s.charAt(0))*16 + b16ToB10(s.charAt(1));</span>
  }
  public String phToS(){
<span class="nc" id="L89">    String sr =&quot;&quot;;</span>
<span class="nc" id="L90">    sr=sr+b10ToB16(r+128);</span>
<span class="nc" id="L91">    sr=sr+b10ToB16(v+128);</span>
<span class="nc" id="L92">    sr=sr+b10ToB16(b+128);</span>
<span class="nc" id="L93">    return sr;</span>
  }
  public Color phToColor(){
<span class="nc" id="L96">    return new Color(r+128,v+128,b+128,255);</span>
  }


  public static String b10ToB16(int x){
<span class="nc" id="L101">    int y = x/16;</span>
<span class="nc" id="L102">    x = x - y*16;</span>
<span class="nc" id="L103">    String sr = nbrToChiffre(y) + nbrToChiffre(x);</span>
<span class="nc" id="L104">    return sr;</span>
  }
  public static String nbrToChiffre(int x){ //10 devient ascci(41) (cad A).
<span class="nc bnc" id="L107" title="All 2 branches missed.">    if (x&lt;10){return x+&quot;&quot;;}</span>
<span class="nc" id="L108">    int y = x-10;</span>
<span class="nc" id="L109">    return ascii.asciiToA(y+65)+&quot;&quot;;</span>
  }
  public static int b16ToB10(char c){
<span class="nc bnc" id="L112" title="All 4 branches missed.">    if (c&gt;=65 &amp;&amp; c&lt;=90){ return c-55;}</span>
<span class="nc bnc" id="L113" title="All 4 branches missed.">    if (c&gt;=48 &amp;&amp; c&lt;=57){ return c-48;}</span>
<span class="nc" id="L114">    erreur.alerte(&quot;un code couleur n'as pas pu être transformer &quot;+c+&quot;.  Il sera remplacer par un code alléatoire.&quot;);</span>
<span class="nc" id="L115">    return allea.getAlléa(16);</span>
  }
  public static Pheromone sToPh(String s){
    Pheromone ph;
    try {
<span class="nc" id="L120">      ph=new Pheromone(s);</span>
<span class="nc" id="L121">    }catch (Exception e) {</span>
<span class="nc" id="L122">      erreur.alerte(&quot;Le code &quot;+s+&quot; n'as pas pu être changer en Pheromone&quot;,&quot;Pheromone est choisi aléatoirement.&quot;);</span>
<span class="nc" id="L123">      ph = new Pheromone();</span>
<span class="nc" id="L124">    }</span>
<span class="nc" id="L125">    return ph;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>