<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Joueur.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Formiko</a> &gt; <a href="index.source.html" class="el_package">fr.formiko.formiko</a> &gt; <span class="el_source">Joueur.java</span></div><h1>Joueur.java</h1><pre class="source lang-java linenums">package fr.formiko.formiko;

import fr.formiko.formiko.Main;
import fr.formiko.formiko.Message;
import fr.formiko.views.gui2d.readG;
import fr.formiko.usuel.debug;
import fr.formiko.usuel.erreur;
import fr.formiko.usuel.g;
import fr.formiko.usuel.listes.CMessage;
import fr.formiko.usuel.listes.GMessage;
import fr.formiko.usuel.maths.allea;
import fr.formiko.usuel.maths.math;
import fr.formiko.usuel.read;
import fr.formiko.usuel.tableau;

import java.io.Serializable;

public class Joueur implements Serializable{
  private static int i; // le i augmente a chaque fois qu'on créer un joueur.
  private final int id;
  private Fourmiliere fere;
  private String pseudo;
  private boolean ia;
<span class="fc" id="L24">  private static String list [] = {&quot;Sulfure&quot;, &quot;Eole&quot;, &quot;Hélios&quot;, &quot;Léa&quot;, &quot;Poumpoum&quot;, &quot;Barabadur&quot;, &quot;Diode&quot;, &quot;Oxygène&quot;, &quot;Toto&quot;, &quot;Javet&quot;,&quot;327a&quot;,&quot;Chli-pou-ni&quot;,&quot;Bel-o-kiu-kiuni&quot;,&quot;Ha-yekte-douni&quot;,&quot;Sinjoro pistolo-terpomo&quot;,&quot;fraŭlino Lupo&quot;,&quot;Lignolaboristo&quot;,&quot;Eraro7&quot;,&quot;Hidrologo&quot;,&quot;Mago Vulpo&quot;,&quot;Markso&quot;,&quot;Luciano&quot;,&quot;gnomo&quot;,&quot;koboldo&quot;};</span>
  private GMessage gm;
  private boolean caseNuageuse [][];
  private boolean caseSombre [][];
  // CONSTRUCTEUR -----------------------------------------------------------------
  //Principal
<span class="fc" id="L30">  public Joueur (Fourmiliere fere, String pseudo, boolean ia){</span>
<span class="fc" id="L31">    id = i; i++; gm = new GMessage();</span>
<span class="fc" id="L32">    this.fere = fere; this.pseudo = pseudo; this.ia = ia;</span>
<span class="fc" id="L33">  }</span>
  //Auxiliaire
  public Joueur (int nbrDeFourmi, boolean ia, String pseudo, Carte mapo){
<span class="fc" id="L36">    this(null,pseudo,ia);</span>
<span class="fc" id="L37">    this.fere = new Fourmiliere (nbrDeFourmi,this, mapo);</span>
<span class="fc" id="L38">  }</span>
  public Joueur (int nbrDeFourmi, boolean ia, Carte mapo){
<span class="fc" id="L40">    this(nbrDeFourmi,ia,&quot;&quot;,mapo); // On crée un joueur au pseudo vide puis on le rempli si c'est une ia.</span>
<span class="pc bpc" id="L41" title="1 of 2 branches missed.">    if (ia){</span>
<span class="fc" id="L42">      pseudo = get1Pseudo();</span>
    }
<span class="fc" id="L44">  }</span>
  // GET SET -----------------------------------------------------------------------
<span class="fc" id="L46">  public int getId(){return id;}</span>
<span class="nc" id="L47">  public static int getI(){return i;}</span>
<span class="nc" id="L48">  public String getPseudo(){return pseudo;}</span>
<span class="nc" id="L49">  public void setPseudo(String s){pseudo = s;}</span>
<span class="fc" id="L50">  public Fourmiliere getFourmiliere(){return fere;}</span>
<span class="fc" id="L51">  public Fourmiliere getFere(){ return getFourmiliere();}</span>
  public void setFourmiliere(Fourmiliere nouvelleFourmiliere) {
<span class="nc" id="L53">    fere = nouvelleFourmiliere;</span>
<span class="nc" id="L54">    nouvelleFourmiliere.setJoueur(this);</span>
<span class="nc" id="L55">  }</span>
<span class="fc" id="L56">  public boolean getIa(){ return ia;}</span>
<span class="fc" id="L57">  public void setIa(boolean b){ia = b; }</span>
<span class="fc" id="L58">  public void addMessage(Message m){ gm.add(m);}</span>
<span class="nc" id="L59">  public GMessage getGm(){ return gm;}</span>
<span class="pc" id="L60">  public boolean getCaseSombre(int x, int y){ try {return caseSombre[x][y];}catch (Exception e) {return false;}}</span>
<span class="fc" id="L61">  public void setCaseSombre(int x, int y, boolean b){ caseSombre[x][y]=b;}</span>
<span class="fc" id="L62">  public boolean isCaseSombre(CCase cc){return getCaseSombre(cc.getContenu().getPoint().getX(),cc.getContenu().getPoint().getY());}</span>
<span class="pc" id="L63">  public boolean getCaseNuageuse(int x, int y){ try {return caseNuageuse[x][y];}catch (Exception e) {return false;}}</span>
<span class="fc" id="L64">  public void setCaseNuageuse(int x, int y, boolean b){ caseNuageuse[x][y]=b;}</span>
<span class="fc" id="L65">  public boolean isCaseNuageuse(CCase cc){return getCaseNuageuse(cc.getContenu().getPoint().getX(),cc.getContenu().getPoint().getY());}</span>
<span class="nc" id="L66">  public void setPheromone(Pheromone ph){fere.getGc().setPheromone(ph);}</span>
<span class="nc" id="L67">  public int getScore(){return fere.getScore();}</span>
<span class="fc" id="L68">  public static void ini(){i=1;}</span>
// Fonctions propre -----------------------------------------------------------
  public String toString(){
<span class="nc bnc" id="L71" title="All 2 branches missed.">    String s = (ia) ? g.get(&quot;laIA&quot;) : g.get(&quot;laJoueurHumain&quot;);</span>
<span class="nc" id="L72">    s = pseudo + &quot; est &quot; + s + &quot; &quot; + id;</span>
<span class="nc" id="L73">    return s + &quot;\n&quot; + fere.toString();</span>
    //GMessage, casesSombres et casesNuageuses ne sont pas afficher pour cause de &quot;pas tres utile&quot;
  }
  public static String get1Pseudo(){
    String sr;
<span class="pc bpc" id="L78" title="1 of 2 branches missed.">    if (list.length&gt;0){</span>
<span class="fc" id="L79">      int x = allea.getAlléa(list.length);</span>
<span class="fc" id="L80">      sr = list[x];</span>
<span class="fc" id="L81">      list = tableau.retirerX(list, list[x]); // Comme ca on aura pas de doublon.</span>
<span class="fc" id="L82">    }else {</span>
<span class="nc" id="L83">      sr = &quot;X&quot;;</span>
    }
<span class="fc" id="L85">    return sr;</span>
  }
  public void changerDePeudo(){
<span class="nc" id="L88">    setPseudo(read.getString(&quot;pseudo&quot;,pseudo + i,&quot;Rentrez votre nouveau pseudo : &quot;));</span>
<span class="nc" id="L89">  }</span>
  public void jouer(){
<span class="nc bnc" id="L91" title="All 2 branches missed.">    if(!ia){</span>
<span class="nc" id="L92">      Message m = new Message(pseudo+&quot; , &quot;+g.get(&quot;débutTourJoueur&quot;),id,6);</span>
<span class="nc" id="L93">    }else{</span>
<span class="nc" id="L94">      Message m = new Message(pseudo+&quot; &quot;+g.get(&quot;débutTourIa&quot;),id,6);</span>
    }
<span class="nc bnc" id="L96" title="All 4 branches missed.">    if(Main.getGj().getJoueurHumain().length()&gt;1 &amp;&amp; !ia){</span>
<span class="nc" id="L97">      Main.repaint();</span>
<span class="nc" id="L98">      Main.getPj().alerte(pseudo+&quot; &quot;+g.get(&quot;débutTourJoueur&quot;)+&quot;.&quot;);</span>
    }
<span class="nc" id="L100">    fere.jouer();</span>
<span class="nc" id="L101">  }</span>
  public void afficheScore(){
<span class="nc" id="L103">    System.out.println(pseudo +&quot; : &quot;+getScore());</span>
<span class="nc" id="L104">  }</span>
  public void initialisationCaseNS(){
<span class="fc" id="L106">    int x = Main.getGc().getNbrX();</span>
<span class="fc" id="L107">    int y = Main.getGc().getNbrY();</span>
<span class="fc" id="L108">    caseNuageuse = new boolean[x][y];</span>
<span class="fc" id="L109">    caseSombre = new boolean[x][y];</span>
<span class="fc bfc" id="L110" title="All 2 branches covered.">    for (int i=0;i&lt;x ;i++ ) {</span>
<span class="fc bfc" id="L111" title="All 2 branches covered.">      for (int j=0;j&lt;y ;j++ ) {</span>
<span class="fc" id="L112">        caseNuageuse[i][j]=true;</span>
      }
    }
<span class="fc bfc" id="L115" title="All 2 branches covered.">    for (int i=0;i&lt;x ;i++ ) {</span>
<span class="fc bfc" id="L116" title="All 2 branches covered.">      for (int j=0;j&lt;y ;j++ ) {</span>
<span class="fc" id="L117">        caseSombre[i][j]=true;</span>
      }
    }
<span class="fc" id="L120">  }</span>
  public void actualiserCaseSN(){
<span class="fc" id="L122">    int x = Main.getGc().getNbrX();</span>
<span class="fc" id="L123">    int y = Main.getGc().getNbrY();</span>
<span class="fc bfc" id="L124" title="All 2 branches covered.">    for (int i=0;i&lt;x ;i++ ) {</span>
<span class="fc bfc" id="L125" title="All 2 branches covered.">      for (int j=0;j&lt;y ;j++ ) {</span>
<span class="fc" id="L126">        caseSombre[i][j]=true;</span>
      }
    }
<span class="fc" id="L129">    fere.getGc().actualiserCaseSN();</span>
    //affichecaseSN();
<span class="fc" id="L131">  }</span>
  public void affichecaseSN(){
<span class="nc" id="L133">    System.out.println(&quot;Les tableaux s'affiche en inversé par rapport a la carte !&quot;);</span>
<span class="nc" id="L134">    System.out.println(&quot;caseNuageuse&quot;);</span>
<span class="nc" id="L135">    tableau.afficher(caseNuageuse);</span>
<span class="nc" id="L136">    System.out.println(&quot;caseSombre&quot;);</span>
<span class="nc" id="L137">    tableau.afficher(caseSombre);</span>
<span class="nc" id="L138">  }</span>
  public void prendreEnCompteLaDifficulté(){
    try {
<span class="nc" id="L141">      int x = (Main.getDifficulté()+3)*10;</span>
<span class="nc bnc" id="L142" title="All 2 branches missed.">      if(!ia){ x= 60-x;}</span>
<span class="nc" id="L143">      this.fere.getGc().getReine().setNourriture(math.max(x,10));//10 minimum. (60 max en théorie.)</span>
<span class="nc" id="L144">    }catch (Exception e) {erreur.alerte(&quot;Impossible de prendre en compte la difficulté&quot;);}</span>
<span class="nc" id="L145">  }</span>
  public String scoreToString(){
<span class="nc" id="L147">    return getPseudo()+&quot; : &quot;+getScore();</span>
  }
  public void setAction0AndEndTurn(){
<span class="nc" id="L150">    fere.getGc().setAction0AndEndTurn();</span>
<span class="nc" id="L151">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>