<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CCreature.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Formiko</a> &gt; <a href="index.source.html" class="el_package">fr.formiko.formiko</a> &gt; <span class="el_source">CCreature.java</span></div><h1>CCreature.java</h1><pre class="source lang-java linenums">package fr.formiko.formiko;

import fr.formiko.formiko.Main;
import fr.formiko.usuel.debug;
import fr.formiko.usuel.erreur;
import fr.formiko.usuel.exceptions.ListItemNotFoundException;
import fr.formiko.usuel.exceptions.EmptyListException;
import fr.formiko.usuel.g;
import fr.formiko.usuel.listes.List;

import java.io.Serializable;
import java.util.Iterator;

public class CCreature implements Serializable{
  protected CCreature suivant, précédente;
  protected Creature contenu;
  // CONSTRUCTEUR ---------------------------------------------------------------
<span class="fc" id="L18">  public CCreature(Creature c, CCreature suivant, CCreature précédente){</span>
<span class="fc" id="L19">    contenu = c;</span>
<span class="fc" id="L20">    this.suivant = suivant;</span>
<span class="fc" id="L21">    this.précédente = précédente;</span>
<span class="fc" id="L22">  }</span>
  public CCreature(Creature c){
<span class="fc" id="L24">    this(c, null, null);</span>
<span class="fc" id="L25">  }</span>
  // GET SET --------------------------------------------------------------------
<span class="fc" id="L27">  public CCreature getSuivant(){return suivant;}</span>
<span class="fc" id="L28">  public void setSuivant(CCreature cc){suivant = cc;}</span>
<span class="nc" id="L29">  public CCreature getPrécédent(){return précédente;}</span>
<span class="fc" id="L30">  public void setPrécédent(CCreature cc){précédente = cc;}</span>
<span class="fc" id="L31">  public Creature getContenu(){return contenu;}</span>
<span class="nc" id="L32">  public Creature getCreature(){return getContenu();}</span>
  // Fonctions propre -----------------------------------------------------------
  public String toString(){
<span class="pc bpc" id="L35" title="1 of 2 branches missed.">    if (suivant == null){</span>
<span class="fc" id="L36">      return contenu.toString()+&quot;&quot;;</span>
    }else{
<span class="nc" id="L38">      return contenu.toString()+ &quot;\n&quot;+suivant.gcToString();</span>
    }
<span class="nc" id="L40">  }public String gcToString(){return toString();}</span>
  public int length(){
<span class="fc bfc" id="L42" title="All 2 branches covered.">    if (suivant == null){</span>
<span class="fc" id="L43">      return 1;</span>
    }else{
<span class="fc" id="L45">      return 1 + suivant.length();</span>
    }
  }
  public void setPheromone(Pheromone ph){
<span class="nc" id="L49">    CCreature cc = this;</span>
<span class="nc bnc" id="L50" title="All 2 branches missed.">    while(cc!=null){</span>
<span class="nc" id="L51">      cc.getContenu().setPheromone(ph);</span>
<span class="nc" id="L52">      cc=cc.getSuivant();</span>
    }
<span class="nc" id="L54">  }</span>
  public Fourmi getReine(){
<span class="fc bfc" id="L56" title="All 2 branches covered.">    if (getSuivant()==null){ return null;}</span>
<span class="pc bpc" id="L57" title="1 of 2 branches missed.">    if (getSuivant().getContenu() instanceof Fourmi){</span>
<span class="fc" id="L58">      Fourmi f1 = (Fourmi) getSuivant().getContenu();</span>
<span class="fc bfc" id="L59" title="All 2 branches covered.">      if (f1.estReine()){//si c'est la reine</span>
<span class="fc" id="L60">        return f1;</span>
      }
    }
<span class="fc" id="L63">    return getSuivant().getReine();</span>
  }
  public Fourmi getPlusAffamée(){
<span class="nc" id="L66">    Fourmi fr = (Fourmi) this.getContenu();</span>
<span class="nc" id="L67">    CCreature ccTest = suivant;</span>
<span class="nc bnc" id="L68" title="All 2 branches missed.">    while (ccTest != null){</span>
<span class="nc" id="L69">      Fourmi fTest = (Fourmi) ccTest.getContenu();</span>
<span class="nc bnc" id="L70" title="All 2 branches missed.">      if (fTest.getNourriture()&lt;fr.getNourriture()){ fr = fTest;}</span>
<span class="nc" id="L71">      ccTest = ccTest.getSuivant();</span>
<span class="nc" id="L72">    }</span>
<span class="nc" id="L73">    return fr;</span>
  }
  public GCreature getGcStade(int stade){
<span class="fc" id="L76">    GCreature gcr = new GCreature();</span>
<span class="fc" id="L77">    CCreature ccTest = this;</span>
<span class="fc bfc" id="L78" title="All 2 branches covered.">    while (ccTest != null){</span>
<span class="fc" id="L79">      Creature cTest = ccTest.getContenu();</span>
<span class="fc" id="L80">      Fourmi fTest = (Fourmi) cTest;</span>
<span class="fc bfc" id="L81" title="All 2 branches covered.">      if(fTest.getStade() == stade){</span>
<span class="fc" id="L82">        gcr.add(cTest);</span>
      }
<span class="fc" id="L84">      ccTest = ccTest.getSuivant();</span>
<span class="fc" id="L85">    }</span>
<span class="fc" id="L86">    return gcr;</span>
  }
  public GCreature getGcType(int type){
<span class="fc" id="L89">    GCreature gcr = new GCreature();</span>
<span class="fc" id="L90">    CCreature ccTest = this;</span>
<span class="fc bfc" id="L91" title="All 2 branches covered.">    while (ccTest != null){</span>
<span class="fc" id="L92">      Creature cTest = ccTest.getContenu();</span>
<span class="fc" id="L93">      Fourmi fTest = (Fourmi) cTest;</span>
<span class="fc bfc" id="L94" title="All 2 branches covered.">      if(fTest.getTypeF() == type){</span>
<span class="fc" id="L95">        gcr.add(cTest);</span>
      }
<span class="fc" id="L97">      ccTest = ccTest.getSuivant();</span>
<span class="fc" id="L98">    }</span>
<span class="fc" id="L99">    return gcr;</span>
  }
  public Creature getCouvainSale(){
<span class="nc bnc" id="L102" title="All 2 branches missed.">    if (suivant == null){ return null;}</span>
<span class="nc" id="L103">    Fourmi f = (Fourmi) suivant.getContenu();</span>
<span class="nc bnc" id="L104" title="All 2 branches missed.">    if (f.getPropreté() &lt; 75){</span>
<span class="nc" id="L105">      return f;</span>
    }else{
<span class="nc" id="L107">      return suivant.getCouvainSale();</span>
    }
  }
  public void getCouvainsSale(){
<span class="nc bnc" id="L111" title="All 2 branches missed.">    if (suivant == null){ return;}</span>
<span class="nc" id="L112">    Fourmi f = (Fourmi) suivant.getContenu();</span>
<span class="nc bnc" id="L113" title="All 2 branches missed.">    if (f.getPropreté() &gt; 75){</span>
<span class="nc" id="L114">      suivant = suivant.getSuivant();</span>
<span class="nc" id="L115">      this.getCouvainsSale();</span>
    }else{
<span class="nc" id="L117">      suivant.getCouvainsSale();</span>
    }
<span class="nc" id="L119">  }</span>
  public Creature getCreatureParId(int id){
<span class="pc bpc" id="L121" title="1 of 2 branches missed.">    if (this.getSuivant()==null){ return null;}</span>
<span class="fc bfc" id="L122" title="All 2 branches covered.">    if (suivant.getContenu().getId()==id){</span>
<span class="fc" id="L123">      return suivant.getContenu();</span>
    }else{
<span class="fc" id="L125">      return this.getSuivant().getCreatureParId(id);</span>
    }
  }
  public Fourmi getFourmiParFere(Fourmiliere fere){
<span class="nc bnc" id="L129" title="All 2 branches missed.">    if(getContenu().estFourmi()){</span>
<span class="nc bnc" id="L130" title="All 2 branches missed.">      if(((Fourmi)(getContenu())).getFere().equals(fere)){return (Fourmi)contenu;}</span>
    }
<span class="nc bnc" id="L132" title="All 2 branches missed.">    if (this.getSuivant()==null){ return null;}</span>
<span class="nc" id="L133">    return suivant.getFourmiParFere(fere);</span>
  }
  public GCreature filtreAlliés(Creature c,int différenceTolléré){
<span class="fc" id="L136">    GCreature gcr = new GCreature();</span>
<span class="fc" id="L137">    CCreature ccTest = this;</span>
<span class="fc bfc" id="L138" title="All 2 branches covered.">    while(ccTest != null){</span>
<span class="fc bfc" id="L139" title="All 2 branches covered.">      if (c.getPheromone().equals(ccTest.getContenu().getPheromone(),différenceTolléré)){</span>
<span class="fc" id="L140">        gcr.addFin(ccTest.getContenu());</span>
      }
<span class="fc" id="L142">      ccTest = ccTest.getSuivant();</span>
    }
<span class="fc" id="L144">    return gcr;</span>
  }
  /**
  *{@summary delete Creature that can't eat more.}&lt;br&gt;
  *@version 1.29
  */
  public GCreature filtreFaimMax(){
<span class="fc" id="L151">    GCreature gcr = new GCreature();</span>
<span class="fc" id="L152">    CCreature ccTest = this;</span>
<span class="fc bfc" id="L153" title="All 2 branches covered.">    while(ccTest != null){</span>
<span class="fc bfc" id="L154" title="All 2 branches covered.">      if (ccTest.getContenu().getNourriture()&lt;ccTest.getContenu().getNourritureMax()){</span>
<span class="fc" id="L155">        gcr.addFin(ccTest.getContenu());</span>
      }
<span class="fc" id="L157">      ccTest = ccTest.getSuivant();</span>
    }
<span class="fc" id="L159">    return gcr;</span>
  }
  /**
  *{@summary delete Creature that can't be cleaner.}&lt;br&gt;
  *@version 1.29
  */
  public GCreature filtrePropreteMax(){
<span class="fc" id="L166">    GCreature gcr = new GCreature();</span>
<span class="fc" id="L167">    CCreature ccTest = this;</span>
<span class="fc bfc" id="L168" title="All 2 branches covered.">    while(ccTest != null){</span>
<span class="fc bfc" id="L169" title="All 2 branches covered.">      if (ccTest.getContenu().getProprete()&lt;100){</span>
<span class="fc" id="L170">        gcr.addFin(ccTest.getContenu());</span>
      }
<span class="fc" id="L172">      ccTest = ccTest.getSuivant();</span>
    }
<span class="fc" id="L174">    return gcr;</span>
  }
  /**
  *{@summary delete Creature that didn't whant food.}&lt;br&gt;
  *@version 1.29
  */
  public GCreature filtreWantFood(){
<span class="fc" id="L181">    GCreature gcr = new GCreature();</span>
<span class="fc" id="L182">    CCreature ccTest = this;</span>
<span class="fc bfc" id="L183" title="All 2 branches covered.">    while(ccTest != null){</span>
<span class="fc bfc" id="L184" title="All 2 branches covered.">      if (ccTest.getContenu().wantFood()){</span>
<span class="fc" id="L185">        gcr.addFin(ccTest.getContenu());</span>
      }
<span class="fc" id="L187">      ccTest = ccTest.getSuivant();</span>
    }
<span class="fc" id="L189">    return gcr;</span>
  }
  /**
  *{@summary delete Creature that didn't whant clean.}&lt;br&gt;
  *@version 1.29
  */
  public GCreature filtreWantClean(){
<span class="fc" id="L196">    GCreature gcr = new GCreature();</span>
<span class="fc" id="L197">    CCreature ccTest = this;</span>
<span class="fc bfc" id="L198" title="All 2 branches covered.">    while(ccTest != null){</span>
<span class="fc bfc" id="L199" title="All 2 branches covered.">      if (ccTest.getContenu().wantClean()){</span>
<span class="fc" id="L200">        gcr.addFin(ccTest.getContenu());</span>
      }
<span class="fc" id="L202">      ccTest = ccTest.getSuivant();</span>
    }
<span class="fc" id="L204">    return gcr;</span>
  }
  public void setLienFere(Fourmiliere fere){
<span class="nc" id="L207">    CCreature ccTest = this;</span>
<span class="nc bnc" id="L208" title="All 2 branches missed.">    while(ccTest != null){</span>
<span class="nc bnc" id="L209" title="All 2 branches missed.">      if(ccTest.getContenu() instanceof Fourmi){</span>
<span class="nc" id="L210">        Fourmi fTest = (Fourmi)(ccTest.getContenu());</span>
<span class="nc" id="L211">        fTest.setFere(fere);</span>
      }
<span class="nc" id="L213">      ccTest = ccTest.getSuivant();</span>
    }
<span class="nc" id="L215">  }</span>
  public int [] gcToTInt(){
<span class="nc" id="L217">    int lentr =this.length();</span>
<span class="nc" id="L218">    int tr[]=new int [lentr];int k=0;</span>
<span class="nc" id="L219">    CCreature cc = this;</span>
<span class="nc bnc" id="L220" title="All 4 branches missed.">    while(k&lt;lentr &amp;&amp; cc!= null){</span>
<span class="nc" id="L221">      tr[k]=cc.getContenu().getId();k++;</span>
<span class="nc" id="L222">      cc=cc.getSuivant();</span>
    }
<span class="nc" id="L224">    return tr;</span>
  }
  public GCreature copier(){
<span class="nc" id="L227">    CCreature cc = this;</span>
<span class="nc" id="L228">    GCreature gcr = new GCreature();</span>
<span class="nc bnc" id="L229" title="All 2 branches missed.">    while(cc!=null){</span>
<span class="nc" id="L230">      gcr.addFin(cc.getContenu());//on ajoute seulement le contenu a chaque fois.</span>
<span class="nc" id="L231">      cc=cc.getSuivant();</span>
    }
<span class="nc" id="L233">    return gcr;</span>
  }
  public void retirer(Creature c) {
<span class="fc bfc" id="L236" title="All 2 branches covered.">    if (suivant == null){ throw new ListItemNotFoundException(&quot;Creature&quot;,c.getId());}</span>
<span class="fc bfc" id="L237" title="All 2 branches covered.">    if (suivant.getContenu().equals(c)){</span>
<span class="fc" id="L238">      suivant = suivant.getSuivant(); return;</span>
    }
<span class="fc" id="L240">    suivant.retirer(c);</span>
<span class="fc" id="L241">  }</span>
  public void afficheToi(){
<span class="nc" id="L243">    int x = 0;</span>
<span class="nc bnc" id="L244" title="All 2 branches missed.">    if(suivant!=null){ x++;}</span>
<span class="nc bnc" id="L245" title="All 2 branches missed.">    if(précédente!=null){ x++;}</span>
<span class="nc" id="L246">    System.out.print(g.get(&quot;celluleA&quot;)+&quot; &quot;+ x+&quot; &quot;+g.get(&quot;lien&quot;)+&quot; : &quot;);</span>
<span class="nc" id="L247">    System.out.println(contenu);</span>
<span class="nc" id="L248">  }</span>
  public void afficheToiRéduit(){
<span class="nc" id="L250">    int x = 0;</span>
<span class="nc bnc" id="L251" title="All 2 branches missed.">    if(suivant!=null){ x++;}</span>
<span class="nc bnc" id="L252" title="All 2 branches missed.">    if(précédente!=null){ x++;}</span>
<span class="nc" id="L253">    System.out.print(contenu.getId());</span>
<span class="nc" id="L254">  }</span>
  public void afficheTout(){
<span class="nc" id="L256">    afficheToi();</span>
<span class="nc bnc" id="L257" title="All 2 branches missed.">    if (suivant!=null){</span>
      try {
<span class="nc" id="L259">        suivant.afficheTout();</span>
<span class="nc" id="L260">      }catch (Exception e) {</span>
<span class="nc" id="L261">        erreur.erreur(&quot;impossible de retirer cet éléments pour cause de stack OverFlow&quot;,true);</span>
<span class="nc" id="L262">      }</span>
    }
<span class="nc" id="L264">  }</span>
  public void afficheToutRéduit(){
<span class="nc" id="L266">    afficheToiRéduit();</span>
<span class="nc bnc" id="L267" title="All 2 branches missed.">    if (suivant!=null){</span>
<span class="nc" id="L268">      suivant.afficheToutRéduit();</span>
    }else{
<span class="nc" id="L270">      System.out.println();</span>
    }
<span class="nc" id="L272">  }</span>
  /**
  *Play as an ant.
  *@version 1.33
  */
  public void jouer(){
<span class="nc bnc" id="L278" title="All 2 branches missed.">    if(contenu instanceof Fourmi){</span>
<span class="nc" id="L279">      Fourmi fActuel = (Fourmi) contenu;</span>
<span class="nc" id="L280">      fActuel.tour();</span>
<span class="nc" id="L281">    }else{</span>
<span class="nc" id="L282">      erreur.erreur(&quot;Impossible de faire jouer comme une fourmi la créature &quot;+contenu.getId()+&quot; qui n'en est pas une.&quot;);</span>
    }
<span class="nc bnc" id="L284" title="All 2 branches missed.">    if(suivant != null){</span>
<span class="nc" id="L285">      suivant.jouer();</span>
    }
<span class="nc" id="L287">  }</span>
  /**
  *reset action before the turn of all the ant.
  *@version 1.33
  */
  public void preTour(){
<span class="nc bnc" id="L293" title="All 2 branches missed.">    if(contenu instanceof Fourmi){</span>
<span class="nc" id="L294">      Fourmi fActuel = (Fourmi) contenu;</span>
<span class="nc" id="L295">      fActuel.preTour();</span>
<span class="nc" id="L296">    }else{</span>
<span class="nc" id="L297">      erreur.erreur(&quot;Impossible de faire preTour comme une fourmi la créature &quot;+contenu.getId()+&quot; qui n'en est pas une.&quot;);</span>
    }
<span class="nc bnc" id="L299" title="All 2 branches missed.">    if(suivant != null){</span>
<span class="nc" id="L300">      suivant.preTour();</span>
    }
<span class="nc" id="L302">  }</span>
  /*public void finTour(){
    Fourmi fActuel =  null;
    if(contenu instanceof Fourmi){
      fActuel = (Fourmi) contenu;
    }else{
      erreur.erreur(&quot;Impossible de faire jouer comme une fourmi la créature &quot;+contenu.getId()+&quot; qui n'en est pas une.&quot;);
    }
    if(fActuel!=null){fActuel.finTour();}
    if(suivant != null){
      suivant.finTour();
    }
  }*/
  public void actualiserCaseSN(){
<span class="fc" id="L316">    CCreature cc = this;</span>
<span class="fc bfc" id="L317" title="All 2 branches covered.">    while(cc!= null){</span>
<span class="pc bpc" id="L318" title="1 of 2 branches missed.">      if(cc.getContenu() instanceof Fourmi){</span>
<span class="fc" id="L319">        Fourmi f = (Fourmi)(cc.getContenu());</span>
<span class="fc" id="L320">        Joueur j = f.getJoueur();</span>
<span class="fc" id="L321">        GCase gc = f.getCCase().getGca(1); //ensemble des case vue par la créature.</span>
<span class="fc" id="L322">        CCase cca = gc.getDébut();</span>
<span class="fc bfc" id="L323" title="All 2 branches covered.">        while(cca!=null){</span>
<span class="fc" id="L324">          int x = cca.getContenu().getX(); int y = cca.getContenu().getY();</span>
<span class="fc" id="L325">          j.setCaseSombre(x,y,false);</span>
<span class="fc" id="L326">          j.setCaseNuageuse(x,y,false);</span>
<span class="fc" id="L327">          cca=cca.getDroite();</span>
<span class="fc" id="L328">        }</span>
      }
<span class="fc" id="L330">      cc = cc.getSuivant();</span>
    }
<span class="fc" id="L332">  }</span>
  public void classerPourNétoyage(){
    //TODO
    //le but est d'habord que personne ne passe en dessous des 50 de propretée.
    //on met tout ce qui sont en dessous de 50 dans l'ordre d'age/stade.
    //et on ajoute ceux qui sont après dans l'ordre de saleté.
<span class="nc" id="L338">  }</span>

  public int [] toTId(){
<span class="fc" id="L341">    int tr []= new int[this.length()];</span>
<span class="fc" id="L342">    CCreature cc = this;</span>
<span class="fc" id="L343">    int k=0;</span>
<span class="fc bfc" id="L344" title="All 2 branches covered.">    while(cc!= null){</span>
<span class="fc" id="L345">      tr[k]=cc.getContenu().getId();k++;</span>
<span class="fc" id="L346">      cc = cc.getSuivant();</span>
    }
<span class="fc" id="L348">    return tr;</span>
  }
  /**
  *{@summary Transform a GCreature in List&amp;lt;Creature&amp;gt;.}
  *@version 1.38
  */
  public List&lt;Creature&gt; toList(){
<span class="fc" id="L355">    CCreature cc = this;</span>
<span class="fc" id="L356">    List&lt;Creature&gt; lc = new List&lt;Creature&gt;();</span>
<span class="fc bfc" id="L357" title="All 2 branches covered.">    while(cc!= null){</span>
<span class="fc" id="L358">      lc.add(cc.getContenu());</span>
<span class="fc" id="L359">      cc = cc.getSuivant();</span>
    }
<span class="fc" id="L361">    return lc;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>