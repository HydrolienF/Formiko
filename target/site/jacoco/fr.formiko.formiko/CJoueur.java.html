<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CJoueur.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Formiko</a> &gt; <a href="index.source.html" class="el_package">fr.formiko.formiko</a> &gt; <span class="el_source">CJoueur.java</span></div><h1>CJoueur.java</h1><pre class="source lang-java linenums">package fr.formiko.formiko;

import fr.formiko.formiko.Main;
import fr.formiko.formiko.Message;
import fr.formiko.usuel.debug;
import fr.formiko.usuel.ecrireUnFichier;
import fr.formiko.usuel.erreur;
import fr.formiko.usuel.g;
import fr.formiko.usuel.listes.GString;

import java.io.Serializable;

public class CJoueur implements Serializable{
  private Joueur contenu;
  private CJoueur suivant;
  // CONSTRUCTEUR -----------------------------------------------------------------
<span class="fc" id="L17">  public CJoueur(Joueur j){</span>
<span class="fc" id="L18">    contenu = j;</span>
<span class="fc" id="L19">  }</span>
  // GET SET -----------------------------------------------------------------------
<span class="fc" id="L21">  public void setSuivant(CJoueur c){suivant = c;}</span>
<span class="fc" id="L22">  public CJoueur getSuivant(){return suivant;}</span>
<span class="nc" id="L23">  public Joueur getJoueur(){return getContenu();}</span>
<span class="fc" id="L24">  public Joueur getContenu(){return contenu;}</span>
  public GCreature getGc(){
<span class="nc" id="L26">    CJoueur act = this;</span>
<span class="nc" id="L27">    GCreature gcr = new GCreature();</span>
<span class="nc" id="L28">    gcr.add(this.getContenu().getFere().getGc().copier());</span>
<span class="nc bnc" id="L29" title="All 2 branches missed.">    while(act.getSuivant() != null){</span>
<span class="nc" id="L30">      GCreature gcr2 = act.getSuivant().getContenu().getFere().getGc().copier();</span>
<span class="nc" id="L31">      gcr.add(gcr2);</span>
<span class="nc" id="L32">      act=act.getSuivant();</span>
<span class="nc" id="L33">    }</span>
<span class="nc" id="L34">    return gcr;</span>
  }
  public Joueur getJoueurParId(int id){
<span class="pc bpc" id="L37" title="1 of 2 branches missed.">    if(this.getContenu().getId()==id){ return this.getContenu();}</span>
<span class="nc bnc" id="L38" title="All 2 branches missed.">    if(this.getSuivant()==null){return null;}</span>
<span class="nc" id="L39">    return suivant.getJoueurParId(id);</span>
  }
  public GJoueur getJoueurHumain(){
<span class="fc" id="L42">    GJoueur gjr = new GJoueur();</span>
<span class="fc" id="L43">    CJoueur cj = this;</span>
<span class="fc bfc" id="L44" title="All 2 branches covered.">    while(cj!= null){</span>
<span class="pc bpc" id="L45" title="1 of 2 branches missed.">      if(!cj.getContenu().getIa()){ gjr.add(cj.getContenu());}</span>
<span class="fc" id="L46">      cj = cj.getSuivant();</span>
    }
<span class="fc" id="L48">    return gjr;</span>
  }
  // Fonctions propre -----------------------------------------------------------
  public String toString(){
<span class="nc bnc" id="L52" title="All 2 branches missed.">    if(suivant==null){return contenu.toString();}</span>
<span class="nc" id="L53">    return contenu.toString() +&quot;\n&quot;+ suivant.toString();</span>
  }
  public int length(int x){
<span class="pc bpc" id="L56" title="1 of 2 branches missed.">    if (suivant != null) { x++; return suivant.length(x);}</span>
<span class="fc" id="L57">    return x;</span>
  }
  public Joueur getJoueurNonIa(){
<span class="nc bnc" id="L60" title="All 2 branches missed.">    if(getSuivant() == null){ return null;} // On a rien trouvé</span>
<span class="nc bnc" id="L61" title="All 2 branches missed.">    if(getSuivant().getJoueur().getIa() == false){ return getSuivant().getJoueur();} // on a trouvé</span>
<span class="nc" id="L62">    return getSuivant().getJoueurNonIa(); // on continue les recherches.</span>
  }
  public boolean getPlusDeFourmi(){
<span class="nc bnc" id="L65" title="All 2 branches missed.">    if(getContenu().getFere().getGc().length()&gt;0){ return false;} //si on a trouvé une fourmi</span>
<span class="nc bnc" id="L66" title="All 2 branches missed.">    else if(suivant!=null){ return suivant.getPlusDeFourmi();}// sinon on test le joueur suivant.</span>
<span class="nc" id="L67">    return true; //si tout les joueurs on été parcouru</span>
  }
  public GJoueur getGjOrdonné(){
<span class="nc" id="L70">    GJoueur gjr = new GJoueur();</span>
<span class="nc" id="L71">    CJoueur cj = this;</span>
<span class="nc bnc" id="L72" title="All 2 branches missed.">    while(cj!=null){</span>
<span class="nc" id="L73">      Joueur j = cj.getContenu();</span>
<span class="nc" id="L74">      gjr.add(j);//TODO #231</span>
      //gjr.addOrdonnée(j); //TODO #231
<span class="nc" id="L76">      cj=cj.getSuivant();</span>
<span class="nc" id="L77">    }</span>
<span class="nc" id="L78">    return gjr;</span>
  }
  public int getNbrDeJoueurVivant(){
<span class="nc bnc" id="L81" title="All 2 branches missed.">    int x = 0; if(contenu.getFere().getGc().length()!=0){x=1;}</span>
<span class="nc bnc" id="L82" title="All 2 branches missed.">    if (suivant!=null){return x+suivant.getNbrDeJoueurVivant();}</span>
<span class="nc" id="L83">    else{ return x;}</span>
  }
  public void afficheToiParciel(){
<span class="nc" id="L86">    String m = &quot;&quot;;</span>
<span class="nc bnc" id="L87" title="All 2 branches missed.">    if (suivant != null ){ m = &quot; &quot;+g.get(&quot;CJoueur.2&quot;)+&quot; &quot;+ this.getSuivant().getJoueur().getId();}</span>
<span class="nc" id="L88">    System.out.println(g.get(&quot;CJoueur.1&quot;)+&quot; &quot; + this.contenu.getId() + m);</span>
<span class="nc" id="L89">  }</span>
  public void afficheTout(){
<span class="nc" id="L91">    System.out.println(this);</span>
<span class="nc bnc" id="L92" title="All 2 branches missed.">    if (suivant != null){</span>
<span class="nc" id="L93">      suivant.afficheTout();</span>
    }
<span class="nc" id="L95">  }</span>
  public GString scoreToGString(){
<span class="nc" id="L97">    GString gsr = new GString();</span>
<span class="nc" id="L98">    CJoueur cj = this;</span>
<span class="nc bnc" id="L99" title="All 2 branches missed.">    while(cj!=null){</span>
<span class="nc" id="L100">      gsr.add(cj.getContenu().scoreToString());</span>
<span class="nc" id="L101">      cj=cj.getSuivant();</span>
    }
<span class="nc" id="L103">    return gsr;</span>
  }
  public void addOrdonnée(Joueur j){
<span class="nc" id="L106">    CJoueur cj = this;</span>
<span class="nc bnc" id="L107" title="All 4 branches missed.">    while(cj!=null &amp;&amp; cj.getSuivant()!=null){</span>
<span class="nc bnc" id="L108" title="All 2 branches missed.">      if(cj.getSuivant().getContenu().getScore()&gt;j.getScore()){//si on a pas atteint la place voulue.</span>
<span class="nc" id="L109">        cj=cj.getSuivant();</span>
      }else{//placé après le 1a joueur qui a un plus mauvais score.
<span class="nc" id="L111">        CJoueur temp = cj.getSuivant();//l'ancien maillon suivant.</span>
<span class="nc" id="L112">        cj.setSuivant(new CJoueur(j));</span>
<span class="nc" id="L113">        cj.getSuivant().setSuivant(temp);</span>
<span class="nc" id="L114">        return;</span>
      }
<span class="nc bnc" id="L116" title="All 2 branches missed.">      if(cj.getSuivant()==null){ // placé en dernière position</span>
<span class="nc" id="L117">        cj.setSuivant(new CJoueur(j));</span>
      }
    }
<span class="nc" id="L120">  }</span>
  public void retirer(Joueur j){
<span class="nc bnc" id="L122" title="All 2 branches missed.">    if (suivant == null){</span>
<span class="nc" id="L123">      erreur.erreur(&quot;Le joueur &quot;+j.getId()+&quot; n'as pas pue être retiré&quot;);</span>
<span class="nc bnc" id="L124" title="All 2 branches missed.">    } else if( suivant.getContenu()==j){</span>
<span class="nc" id="L125">      suivant = suivant.getSuivant();</span>
    }else{
<span class="nc" id="L127">      suivant.retirer(j);</span>
    }
<span class="nc" id="L129">  }</span>
  public void jouer(){
<span class="nc bnc" id="L131" title="All 4 branches missed.">    if(Main.getPartie()!=null &amp;&amp; !Main.getPartie().getContinuerLeJeu()){return;}</span>
<span class="nc" id="L132">    debug.débogage(&quot;Lancement du tour du joueurs &quot;+contenu.getId());</span>
<span class="nc" id="L133">    contenu.jouer();</span>
<span class="nc bnc" id="L134" title="All 2 branches missed.">    if(suivant != null){</span>
<span class="nc" id="L135">      suivant.jouer();</span>
    }
<span class="nc" id="L137">  }</span>
  public void addMessage(Message m){
<span class="nc" id="L139">    CJoueur cj = this;</span>
<span class="nc bnc" id="L140" title="All 2 branches missed.">    while(cj!=null){</span>
<span class="nc" id="L141">      debug.débogage(&quot;Ajout d'1 message&quot;);</span>
<span class="nc" id="L142">      cj.getContenu().addMessage(m);</span>
<span class="nc" id="L143">      cj=cj.getSuivant();</span>
    }
<span class="nc" id="L145">  }</span>
  public void initialisationCaseNS(){
<span class="nc" id="L147">    CJoueur cj = this;</span>
<span class="nc bnc" id="L148" title="All 2 branches missed.">    while(cj!=null){</span>
<span class="nc" id="L149">      cj.getContenu().initialisationCaseNS();</span>
<span class="nc" id="L150">      cj=cj.getSuivant();</span>
    }
<span class="nc" id="L152">  }</span>
  public void enregistrerLesScores(){
<span class="nc" id="L154">    GString gs = new GString();</span>
<span class="nc" id="L155">    CJoueur cj = this;</span>
<span class="nc" id="L156">    gs.add(cj.getContenu().getFere().enregistrerLesScores());</span>
<span class="nc" id="L157">    cj=cj.getSuivant();</span>
    //
<span class="nc bnc" id="L159" title="All 2 branches missed.">    while(cj!=null){</span>
<span class="nc" id="L160">      gs.add(cj.getContenu().getFere().enregistrerLesScores());</span>
<span class="nc" id="L161">      cj=cj.getSuivant();</span>
    }
<span class="nc" id="L163">    gs = gs.transformerScore();</span>
<span class="nc" id="L164">    ecrireUnFichier.ecrireUnFichier(gs,Main.getFolder().getFolderTemporary()+&quot;score.csv&quot;);</span>
<span class="nc" id="L165">  }</span>
  public void prendreEnCompteLaDifficulté(){
<span class="nc" id="L167">    CJoueur cj = this;</span>
<span class="nc bnc" id="L168" title="All 2 branches missed.">    while(cj!=null){</span>
<span class="nc" id="L169">      cj.getContenu().prendreEnCompteLaDifficulté();</span>
<span class="nc" id="L170">      cj = cj.getSuivant();</span>
    }
<span class="nc" id="L172">  }</span>
  public void setAction0AndEndTurn(){
<span class="nc" id="L174">    CJoueur cj = this;</span>
<span class="nc bnc" id="L175" title="All 2 branches missed.">    while(cj!=null){</span>
<span class="nc" id="L176">      cj.getContenu().setAction0AndEndTurn();</span>
<span class="nc" id="L177">      cj = cj.getSuivant();</span>
    }
<span class="nc" id="L179">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>