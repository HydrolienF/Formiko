<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ThTrad.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Formiko</a> &gt; <a href="index.source.html" class="el_package">fr.formiko.usuel</a> &gt; <span class="el_source">ThTrad.java</span></div><h1>ThTrad.java</h1><pre class="source lang-java linenums">package fr.formiko.usuel;

import fr.formiko.usuel.lireUnFichier;
import fr.formiko.usuel.listes.GString;
import fr.formiko.usuel.tableau;
import fr.formiko.usuel.types.str;

import java.io.*;
import java.util.HashMap;
import java.util.Map;

public class ThTrad extends Thread{
  int langue;
<span class="nc" id="L14">  public ThTrad(int x){</span>
<span class="nc" id="L15">    langue=x;</span>
<span class="nc" id="L16">    run();</span>
<span class="nc" id="L17">  }</span>
  @Override
  public void run(){
<span class="nc" id="L20">    addTradAuto();</span>
<span class="nc" id="L21">  }</span>
  public void addTradAuto(){
<span class="nc" id="L23">    String sLangue=chargerLesTraductions.getLanguage(langue);</span>
<span class="nc" id="L24">    System.out.println(&quot;Ajout de la langue : &quot;+sLangue);</span>
<span class="nc" id="L25">    GString gs = new GString();</span>
<span class="nc" id="L26">    String t[] = chargerLesTraductions.getTableauDesTrad(langue);</span>
<span class="nc bnc" id="L27" title="All 2 branches missed.">    for (String s : t) {</span>
<span class="nc bnc" id="L28" title="All 4 branches missed.">      if(chargerLesTraductions.estLigneDeTrad(s) &amp;&amp; !chargerLesTraductions.fini(s)){//si la ligne termine par :, c'est qu'il manque la trad, on trad donc a partir du fran√ßais.</span>
<span class="nc" id="L29">        String sTrad = tradAuto(g.get(s.substring(0,s.length()-1)),sLangue);</span>
<span class="nc bnc" id="L30" title="All 2 branches missed.">        if(sTrad.equals(&quot;null[auto]&quot;)){return;}//si la langue de trad n'est pas reconnu.</span>
<span class="nc bnc" id="L31" title="All 2 branches missed.">        if(sTrad.charAt(0)==' '){sTrad=sTrad.substring(1);}</span>
<span class="nc" id="L32">        s=s+sTrad;</span>
      }
<span class="nc" id="L34">      gs.add(s);</span>
    }
<span class="nc" id="L36">    ecrireUnFichier.ecrireUnFichier(gs,chargerLesTraductions.getRep()+sLangue+&quot;.txt&quot;);</span>
<span class="nc" id="L37">  }</span>
  private String tradAuto(String s, String sLangue){
    // set up the command and parameter
<span class="nc" id="L40">    String s2 = &quot;&quot;;</span>
    try {
<span class="nc" id="L42">      String pythonScriptPath = &quot;trad/trad.py&quot;;</span>
<span class="nc" id="L43">      String[] cmd = new String[4];</span>
<span class="nc" id="L44">      cmd[0] = &quot;python3&quot;;</span>
<span class="nc" id="L45">      cmd[1] = pythonScriptPath;</span>
<span class="nc" id="L46">      cmd[2] = sLangue;</span>
<span class="nc" id="L47">      cmd[3] = s;</span>

      // create runtime to execute external command
<span class="nc" id="L50">      Runtime rt = Runtime.getRuntime();</span>
<span class="nc" id="L51">      Process pr = rt.exec(cmd);</span>

      // retrieve output from python script
<span class="nc" id="L54">      BufferedReader bfr = new BufferedReader(new InputStreamReader(pr.getInputStream()));</span>
<span class="nc" id="L55">      s2 = bfr.readLine();</span>
<span class="nc" id="L56">    }catch (Exception e) {</span>
<span class="nc" id="L57">      erreur.erreur(&quot;transaltion fail&quot;);</span>
<span class="nc" id="L58">    }</span>
<span class="nc" id="L59">    return s2+&quot;[auto]&quot;;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>