<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>allea.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Formiko</a> &gt; <a href="index.source.html" class="el_package">fr.formiko.usuel.maths</a> &gt; <span class="el_source">allea.java</span></div><h1>allea.java</h1><pre class="source lang-java linenums">package fr.formiko.usuel.maths;

import fr.formiko.usuel.debug;
import fr.formiko.usuel.erreur;
import fr.formiko.usuel.g;
import fr.formiko.usuel.types.str;

import java.util.Random;
/**
*{@summary Random Class.}&lt;br&gt;
*@author Hydrolien
*@version 1.0
*/
<span class="nc" id="L14">public class allea {</span>
<span class="fc" id="L15">  private static Random rand = new Random();</span>
  /**
  *{@summary get a random int in [0;x[.}&lt;br&gt;
  *@return a random boolean.
  *@version 1.0
  */
  public static int getAllea(int x){
<span class="fc bfc" id="L22" title="All 2 branches covered.">    if (x &lt;= 0) { erreur.erreur(&quot;On ne peu tirer un nombre alléatoire qu'entre 2 borne positive, &quot;+x+&quot; ne convient pas&quot;,&quot;On revoie -1&quot;); return -1;}</span>
<span class="fc" id="L23">    int xr = rand.nextInt(x);</span>
<span class="fc" id="L24">    debug.débogage(x + &quot; a été tiré alléatoirement&quot;);</span>
<span class="fc" id="L25">    return xr;</span>
<span class="fc" id="L26">  }public static int getAlléa(int x){return getAllea(x);}</span>
<span class="fc" id="L27">  public static double getRand(){return Math.random();}</span>
  /**
  *{@summary get a random boolean.}&lt;br&gt;
  *@return a random boolean.
  *@version 1.20
  */
  public static boolean getBAllea(){
<span class="fc bfc" id="L34" title="All 2 branches covered.">    if(getAllea(2)==0){return false;}//1 chance sur 2.</span>
<span class="fc" id="L35">    return true;</span>
  }
  /**
  *{@summary get a random int in [].}&lt;br&gt;
  *@return a random int.
  *@version 1.0
  */
  public static int getAlléaDansTableau(int t []){
<span class="fc" id="L43">		return t[getAllea(t.length)];</span>
	}
 // plein de vieille fonctions qui viènent de la version 0.2.0
  public static int getAlléaDansTableauAvecTc(int t[], int tc[]){
<span class="nc" id="L47">    int t4 [] = remplirTableauGraceATc(t,tc);</span>
<span class="nc" id="L48">    return getAlléaDansTableau(t4);</span>
  }
  public static int [] getTableauAlléaDansTableauAvecTc (int lentr, int t[], int tc[]){
<span class="nc" id="L51">    int tr [] = new int [lentr];</span>
<span class="nc bnc" id="L52" title="All 2 branches missed.">    for (int i=0; i&lt;lentr; i++){</span>
<span class="nc" id="L53">      tr[i] = getAlléaDansTableauAvecTc(t,tc);</span>
    }
<span class="nc" id="L55">    return tr;</span>
  }
  public static int [][] getTableauTableauAlléaDansTableauAvecTc (int lentr, int t[], int tc[]){
<span class="nc" id="L58">    int tr [][] = new int [lentr][1];</span>
<span class="nc bnc" id="L59" title="All 2 branches missed.">    for (int i=0; i&lt;lentr; i++){</span>
<span class="nc" id="L60">      tr[i][0] = getAlléaDansTableauAvecTc(t,tc);</span>
    }
<span class="nc" id="L62">    return tr;</span>
  }
  public static int [][] getTableauTableauAlléaDansTableauAvecTc(int colonne, int ligne, int t[], int tc[]){
<span class="nc" id="L65">    int tr[][] = new int [colonne][ligne];</span>
<span class="nc bnc" id="L66" title="All 2 branches missed.">    for(int i=0; i&lt;colonne; i++) {</span>
<span class="nc" id="L67">      tr[i] = getTableauAlléaDansTableauAvecTc(ligne, t, tc);</span>
    }
<span class="nc" id="L69">    return tr;</span>
  }
  public static int [][][] getTableauTableauTableauAlléaDansTableauAvecTc(int colonne, int ligne, int t[], int tc[]){
<span class="nc" id="L72">    int tr[][][] = new int [colonne][ligne][1];</span>
<span class="nc bnc" id="L73" title="All 2 branches missed.">    for(int i=0; i&lt;colonne; i++) {</span>
<span class="nc" id="L74">      tr[i] = getTableauTableauAlléaDansTableauAvecTc(ligne, t, tc);</span>
    }
<span class="nc" id="L76">    return tr;</span>
  }
  public static int [] remplirTableauGraceATc(int t[], int tc[]){
<span class="nc" id="L79">    int lentr = 0; int lentc = tc.length; int lent = t.length;</span>
<span class="nc bnc" id="L80" title="All 2 branches missed.">    if (lentc != lent) { erreur.erreur(g.get(&quot;allea&quot;,1,&quot;Le tableau t n'as pas autant de case que le tableau tc&quot;), g.get(&quot;allea&quot;,2,&quot;On ne prend pas en compte tc&quot;)); return t; }</span>
<span class="nc bnc" id="L81" title="All 2 branches missed.">    for (int i=0; i&lt;lentc; i++){</span>
<span class="nc" id="L82">      lentr = lentr + tc[i];</span>
    }
<span class="nc" id="L84">    int tr [] = new int [lentr];</span>
<span class="nc" id="L85">    int cpt =0;</span>
<span class="nc" id="L86">    int k=0;</span>
<span class="nc bnc" id="L87" title="All 4 branches missed.">    while (k &lt; lentc &amp;&amp; cpt&lt;lentr) {</span>
<span class="nc bnc" id="L88" title="All 2 branches missed.">      for (int i=0; i&lt;tc[k];i++){</span>
<span class="nc" id="L89">        tr[cpt]=t[k];</span>
<span class="nc" id="L90">        cpt++;</span>
      }
<span class="nc" id="L92">      k++;</span>
    }             // si tc = {4,3} et t = {0,1}
<span class="nc" id="L94">    return tr; // on renvoi tr = {0,0,0,0,1,1,1}</span>
  }


  // fluctuer
  // en %age
  public static int fluctuer(int x, byte a){ // a varit de 1 a 100;
<span class="fc bfc" id="L101" title="All 6 branches covered.">    if (a &lt; 1 || a &gt; 100 || x&lt;1){ erreur.erreur(g.get(&quot;allea&quot;,3,&quot;Impossible de faire fluctuer une variable d'autant&quot;),g.get(&quot;allea&quot;,4,&quot;Pas de fluctuation pour cette variable&quot;)); return x;}</span>
<span class="fc" id="L102">    return (x*(100-a)/100) + getAlléa(math.max(((x*a)/50),1));</span>
  }
  public static int fluctuer(int x){ //de 10% par défaut
<span class="fc" id="L105">    return fluctuer(x, (byte) 10); // 90 % + de 0% a 20%</span>
  }
  public static int fluctuer(int x, int a){
<span class="fc" id="L108">    return fluctuer(x, str.iToBy(a));</span>
  }
  //brute
  public static byte fluctuerBrute(byte x, byte a){ // les risques de dépassement sont pris en compte.
<span class="fc" id="L112">    int xr = x - a + getAlléa(math.max(1,a*2));</span>
<span class="pc bpc" id="L113" title="1 of 2 branches missed.">    if (xr &gt; 127){ return (byte) 127;}</span>
<span class="fc bfc" id="L114" title="All 2 branches covered.">    if (xr &lt; -128){ return (byte) -128;}</span>
<span class="fc" id="L115">    return (byte) xr;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>