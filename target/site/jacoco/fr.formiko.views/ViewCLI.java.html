<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ViewCLI.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Formiko</a> &gt; <a href="index.source.html" class="el_package">fr.formiko.views</a> &gt; <span class="el_source">ViewCLI.java</span></div><h1>ViewCLI.java</h1><pre class="source lang-java linenums">package fr.formiko.views;

import fr.formiko.formiko.CCase;
import fr.formiko.formiko.Case;
import fr.formiko.formiko.Creature;
import fr.formiko.formiko.Fourmi;
import fr.formiko.formiko.Joueur;
import fr.formiko.formiko.Main;
import fr.formiko.formiko.Partie;
import fr.formiko.formiko.triche;
import fr.formiko.usuel.Temps;
import fr.formiko.usuel.color;
import fr.formiko.usuel.erreur;
import fr.formiko.usuel.g;
import fr.formiko.usuel.listes.List;
import fr.formiko.usuel.sauvegarderUnePartie;
import fr.formiko.usuel.tableau;
import fr.formiko.usuel.types.str;
import fr.formiko.views.cli.*;

import java.util.LinkedList;
import java.util.Scanner;

/**
 *{@summary View Console Line Interface.}&lt;br&gt;
 *@author Hydrolien
 *@version 1.33
 */
<span class="fc" id="L29">public class ViewCLI implements View {</span>
  private Scanner scannerAnswer;
  private String menuName;
  private String tToPrint[];
  private CLIMap cLIMap;
<span class="fc" id="L34">  private static String sep = &quot;--------------------------------------------------------------------------------&quot;;</span>

  private boolean actionGameOn;
<span class="nc" id="L37">  public boolean getActionGameOn(){return actionGameOn;}</span>
  /**
  *{@summary Initialize all the thing that need to be Initialize before using view.}&lt;br&gt;
  *@return Return true if it work well. (Nothing goes wrong.)
  *@version 1.33
  */
  public boolean ini(){
<span class="nc" id="L44">    actionGameOn=false;</span>
<span class="nc" id="L45">    menuName=&quot;&quot;;</span>
<span class="nc" id="L46">    tToPrint=null;</span>
    try {
<span class="nc" id="L48">      scannerAnswer = new Scanner(System.in);</span>
<span class="nc" id="L49">    }catch (Exception e) {</span>
<span class="nc" id="L50">      return false;</span>
<span class="nc" id="L51">    }</span>
<span class="nc" id="L52">    return true;</span>
  }
  /**
  *{@summary close all the thing that need to be close after using view.}&lt;br&gt;
  *@return Return true if it work well. (Nothing goes wrong.)
  *@version 1.33
  */
  public boolean close(){
<span class="nc" id="L60">    actionGameOn=false;</span>
    try {
<span class="nc" id="L62">      scannerAnswer.close();</span>
<span class="nc" id="L63">    }catch (Exception e) {</span>
<span class="nc" id="L64">      return false;</span>
<span class="nc" id="L65">    }</span>
<span class="nc" id="L66">    return true;</span>
  }
  /**
  *{@summary Refrech actual view.}&lt;br&gt;
  *@return Return true if it work well. (Nothing goes wrong.)
  *@version 1.33
  */
  public boolean paint(){
<span class="nc bnc" id="L74" title="All 2 branches missed.">    if(actionGameOn){</span>
<span class="nc" id="L75">      System.out.println(sep);</span>
<span class="nc" id="L76">      printMap();</span>
<span class="nc" id="L77">      System.out.println(sep);</span>
<span class="nc" id="L78">      printFereInColor();</span>
<span class="nc" id="L79">      System.out.println(sep);</span>
<span class="nc" id="L80">      printArray();</span>
    }else{
<span class="nc" id="L82">      System.out.println(sep);</span>
<span class="nc bnc" id="L83" title="All 2 branches missed.">      if(menuName.equals(&quot;&quot;)){</span>
<span class="nc" id="L84">        printArray();</span>
      }else{
<span class="nc" id="L86">        printActionMenu();</span>
      }
    }
<span class="nc" id="L89">    return true;</span>
  }
  /**
  *{@summary Load main menu.}&lt;br&gt;
  *@return Return true if it work well. (Nothing goes wrong.)
  *@version 1.33
  */
  public boolean menuMain(){
<span class="nc" id="L97">    actionGameOn=false;</span>
<span class="nc" id="L98">    menuName=&quot;menuP&quot;;</span>
<span class="nc" id="L99">    paint();</span>
<span class="nc" id="L100">    int action = getActionMenu(4);</span>
<span class="nc bnc" id="L101" title="All 5 branches missed.">    switch (action) {</span>
      case 1 :
<span class="nc" id="L103">      menuNewGame();</span>
<span class="nc" id="L104">      break;</span>
      case 2 :
<span class="nc" id="L106">      menuLoadAGame();</span>
<span class="nc" id="L107">      break;</span>
      case 3 :
<span class="nc" id="L109">      menuOptions(); //it can return false</span>
<span class="nc" id="L110">      menuMain();</span>
<span class="nc" id="L111">      break;</span>
      case 4 :
<span class="nc" id="L113">      Main.quitter();</span>
      break;
    }
<span class="nc" id="L116">    return true;</span>
  }
  /**
  *{@summary Load new game menu.}&lt;br&gt;
  *@return Return true if it work well. (Nothing goes wrong.)
  *@version 1.33
  */
  public boolean menuNewGame(){
<span class="nc" id="L124">    actionGameOn=false;</span>
<span class="nc" id="L125">    menuName=&quot;menuN&quot;;</span>
<span class="nc" id="L126">    paint();</span>
<span class="nc" id="L127">    int action = getActionMenu(4);</span>
<span class="nc bnc" id="L128" title="All 5 branches missed.">    switch (action) {</span>
      case 1 :
<span class="nc" id="L130">      Main.setPartie(Partie.getDefautlPartie());</span>
<span class="nc" id="L131">      actionGame();</span>
<span class="nc" id="L132">      break;</span>
      case 2 :
<span class="nc" id="L134">      menuPersonaliseAGame();</span>
<span class="nc" id="L135">      break;</span>
      case 3 :
<span class="nc" id="L137">      Main.setPartie(Partie.getPartieTuto());</span>
<span class="nc" id="L138">      actionGame();</span>
<span class="nc" id="L139">      break;</span>
      case 4 :
<span class="nc" id="L141">      menuMain();</span>
      break;
    }

<span class="nc" id="L145">    return true;</span>
  }
  /**
  *{@summary Load the game load menu.}&lt;br&gt;
  *@return Return true if it work well. (Nothing goes wrong.)
  *@version 1.33
  */
  public boolean menuLoadAGame(){
<span class="nc" id="L153">    actionGameOn=false;</span>
<span class="nc" id="L154">    menuName=&quot;&quot;;</span>
<span class="nc" id="L155">    tToPrint=sauvegarderUnePartie.listSave();</span>
<span class="nc bnc" id="L156" title="All 2 branches missed.">    if(tToPrint.length==0){return menuMain();}</span>
    //add a line &quot;backToMainMenu&quot; to tToPrint.
<span class="nc" id="L158">    tToPrint = tableau.addX(tToPrint,g.get(&quot;bouton.nom.-13&quot;));</span>
<span class="nc" id="L159">    paint();</span>
<span class="nc" id="L160">    int choice = getActionMenu(tToPrint.length);</span>
<span class="nc bnc" id="L161" title="All 2 branches missed.">    if(choice==tToPrint.length){</span>
<span class="nc" id="L162">      menuMain();</span>
    }else{
<span class="nc" id="L164">      Partie pa = Partie.getPartieSave(tToPrint[choice-1]);</span>
<span class="nc" id="L165">      Main.setPartie(pa);</span>
<span class="nc" id="L166">      actionGame();</span>
    }
<span class="nc" id="L168">    return true;</span>
  }
  /**
  *{@summary personalise a game menu.}&lt;br&gt;
  *@return Return true if it work well. (Nothing goes wrong.)
  *@version 1.33
  */
  public boolean menuPersonaliseAGame(){
<span class="nc" id="L176">    actionGameOn=false;</span>
<span class="nc" id="L177">    menuName=&quot;&quot;;</span>
<span class="nc" id="L178">    tToPrint=new String [10]; int k=0;</span>
<span class="nc" id="L179">    tToPrint[k]=g.get(&quot;choixCarte&quot;);k++;</span>
<span class="nc" id="L180">    tToPrint[k]=g.get(&quot;choixDif&quot;);k++;</span>
<span class="nc" id="L181">    tToPrint[k]=g.get(&quot;choixVitesseDeJeu&quot;);k++;</span>
<span class="nc" id="L182">    tToPrint[k]=g.get(&quot;nbrDeTour&quot;);k++;</span>
<span class="nc" id="L183">    tToPrint[k]=g.get(&quot;casesSombres&quot;);k++;</span>
<span class="nc" id="L184">    tToPrint[k]=g.get(&quot;casesNuageuses&quot;);k++;</span>
<span class="nc" id="L185">    tToPrint[k]=g.get(&quot;nbrDeJoueur&quot;);k++;</span>
<span class="nc" id="L186">    tToPrint[k]=g.get(&quot;nbrDIa&quot;);k++;</span>
<span class="nc" id="L187">    tToPrint[k]=g.get(&quot;nbrDeFourmi&quot;);k++;</span>
<span class="nc" id="L188">    tToPrint[k]=g.get(&quot;lancerPartie&quot;);k++;</span>
<span class="nc" id="L189">    int choice = -1;</span>
<span class="nc" id="L190">    Partie pa = Partie.getDefautlPartie();</span>
<span class="nc bnc" id="L191" title="All 2 branches missed.">    while (choice!=10) {</span>
<span class="nc" id="L192">      paint();</span>
<span class="nc" id="L193">      choice = getActionMenu(tToPrint.length);</span>
<span class="nc" id="L194">      String input = scannerAnswer.nextLine();</span>
<span class="nc bnc" id="L195" title="All 8 branches missed.">      switch (choice) {</span>
        case 1:
<span class="nc" id="L197">        pa.getCarte().setMap(input);</span>
<span class="nc" id="L198">        break;</span>
        case 2:
<span class="nc" id="L200">        pa.setDifficulté(str.sToBy(input,pa.getDifficulté()));</span>
<span class="nc" id="L201">        break;</span>
        case 3:
<span class="nc" id="L203">        pa.setVitesseDeJeu(str.sToD(input,pa.getVitesseDeJeu()));</span>
<span class="nc" id="L204">        break;</span>
        case 4:
<span class="nc" id="L206">        pa.setNbrDeTour(str.sToI(input,pa.getNbrDeTour()));</span>
<span class="nc" id="L207">        break;</span>
        case 5:
<span class="nc" id="L209">        pa.getCarte().setCasesSombres(str.sToB(input));</span>
<span class="nc" id="L210">        break;</span>
        case 6:
<span class="nc" id="L212">        pa.getCarte().setCasesNuageuses(str.sToB(input));</span>
<span class="nc" id="L213">        break;</span>
        //next setter do not exist yet &amp; need to call back initialisationElément() to be concidered.
        case 7:
<span class="nc" id="L216">        erreur.erreurPasEncoreImplemente();</span>
        //pa.setNbrDeJoueur(str.sToI(input,pa.getNbrDeJoueur()));
        // break;
        case 8:
        //pa.setNbrDIa(str.sToI(input,pa.setNbrDIa()));
        // break;
        case 9:
        //pa.setNbrDeFourmi(str.sToI(input,pa.setNbrDeFourmi()));
        break;
      }
<span class="nc" id="L226">    }</span>
<span class="nc" id="L227">    Main.setPartie(pa);</span>
<span class="nc" id="L228">    actionGame();</span>
<span class="nc" id="L229">    return true;</span>
  }
  /**
  *{@summary Load the options menu.}&lt;br&gt;
  *@return Return true if it work well. (Nothing goes wrong.)
  *@version 1.33
  */
  public boolean menuOptions(){
<span class="nc" id="L237">    erreur.info(g.getM(&quot;optionsCanBeEditedIn&quot;)+&quot; data/Options.md.&quot;);</span>
    // actionGameOn=false;
    // menuName=&quot;menuO&quot;;
    // //tToPrint=sauvegarderUnePartie.listOptions();
    // tToPrint = new String[0]; //to replace by a real choice.
    // if(tToPrint.length==0){return false;}
    // paint();
    // int choice = getActionMenu(tToPrint.length);
    // menuMain();
<span class="nc" id="L246">    return true;</span>
  }
  /**
  *{@summary Launch action game part.}&lt;br&gt;
  *@return Return true if it work well. (Nothing goes wrong.)
  *@version 1.33
  */
  public boolean actionGame(){
<span class="nc" id="L254">    actionGameOn=true;</span>
<span class="nc" id="L255">    menuName=&quot;&quot;;</span>
<span class="nc" id="L256">    Main.getPartie().setPlayingAnt(null);</span>
<span class="nc" id="L257">    Main.getPartie().initialisationElément();</span>
<span class="nc" id="L258">    int toDoAfter = 0;</span>
<span class="nc" id="L259">    String tab [] = new String[4];</span>
<span class="nc" id="L260">    tab[0]=g.get(&quot;doAntAction&quot;);</span>
<span class="nc" id="L261">    tab[1]=g.get(&quot;selectAnt&quot;);</span>
<span class="nc" id="L262">    tab[2]=g.get(&quot;endTurn&quot;);</span>
<span class="nc" id="L263">    tab[3]=g.get(&quot;pauseActionGame&quot;);</span>
<span class="nc" id="L264">    tToPrint = tab;</span>
<span class="nc" id="L265">    Main.getPartie().launchGame();</span>
<span class="nc" id="L266">    Main.setPartie(null);</span>
<span class="nc bnc" id="L267" title="All 4 branches missed.">    switch (toDoAfter) {</span>
      case 3:
<span class="nc" id="L269">      menuLoadAGame();</span>
<span class="nc" id="L270">      break;</span>
      case 4:
<span class="nc" id="L272">      menuMain();</span>
<span class="nc" id="L273">      break;</span>
      case 5:
<span class="nc" id="L275">      Main.quitter();</span>
    }
<span class="nc" id="L277">    return false;</span>
  }


  //Only on action game mode :
  /**
  *{@summary Stop game and print the escape menu.}&lt;br&gt;
  *This action can only be run if action game is on.&lt;br&gt;
  *@return Return true if it work well. (Nothing goes wrong.)
  *@version 1.33
  */
  public int pauseActionGame(){
<span class="nc bnc" id="L289" title="All 2 branches missed.">    if (!actionGameOn) {return -1;}</span>
<span class="nc" id="L290">    tToPrint = new String[6];</span>
<span class="nc" id="L291">    int k=0;</span>
<span class="nc bnc" id="L292" title="All 2 branches missed.">    for (int i=-10;i&gt;-16 ;i--) {</span>
<span class="nc" id="L293">      tToPrint[k]=g.get(&quot;bouton.nom.&quot;+i);</span>
<span class="nc" id="L294">      k++;</span>
    }
<span class="nc" id="L296">    int choice = -1;</span>
<span class="nc bnc" id="L297" title="All 2 branches missed.">    while (choice!=6) {</span>
<span class="nc" id="L298">      paint();</span>
<span class="nc" id="L299">      choice=getActionMenu(tToPrint.length);</span>
<span class="nc bnc" id="L300" title="All 6 branches missed.">      switch (choice) {</span>
        case 1 :
<span class="nc" id="L302">        sauvegarderUnePartie.sauvegarder(Main.getPartie(),getSaveName()+&quot;.save&quot;);</span>
<span class="nc" id="L303">        System.out.println(&quot;saveDone&quot;);</span>
<span class="nc" id="L304">        return 1;</span>
        case 2 :
<span class="nc" id="L306">        menuOptions();</span>
<span class="nc" id="L307">        return 2;</span>
        case 3 :
<span class="nc" id="L309">        menuLoadAGame();</span>
<span class="nc" id="L310">        return 3;</span>
        case 4 :
<span class="nc" id="L312">        menuMain();</span>
<span class="nc" id="L313">        return 4;</span>
        case 5 :
<span class="nc" id="L315">        Main.quitter();</span>
<span class="nc" id="L316">        return 5;</span>
        default :
<span class="nc" id="L318">        System.out.println(&quot;return O&quot;);</span>
<span class="nc" id="L319">        return 0;</span>
      }
    }
<span class="nc" id="L322">    return 0;</span>
  }

  /**
  *{@summary Change the value of the loked Case.}&lt;br&gt;
  *We need to repaint the information about this Case.&lt;br&gt;
  *This action can only be run if action game is on.&lt;br&gt;
  *@return Return true if it work well. (Nothing goes wrong.)
  *@version 1.39
  */
  public boolean setLookedCase(CCase cc){
<span class="nc bnc" id="L333" title="All 4 branches missed.">    if (!actionGameOn || cLIMap==null) {return false;}</span>
<span class="nc bnc" id="L334" title="All 2 branches missed.">    if (cc == null) {cLIMap.setLookedCase(null);return true;}</span>
<span class="nc" id="L335">    cLIMap.setLookedCase(cc.getContenu());</span>
<span class="nc" id="L336">    return true;</span>
  }
  /**
  *{@summary get a CCase from the payer.}&lt;br&gt;
  *It read Strings like this: &quot;b13&quot;, &quot;2c&quot;&lt;br&gt;
  *This action can only be run if action game is on.&lt;br&gt;
  *@return Selected CCase or null if it fail.
  *@version 1.39
  */
  public CCase getCCase(){
<span class="nc" id="L346">    System.out.println(sep);</span>
<span class="nc" id="L347">    System.out.println(g.getM(&quot;were&quot;)+&quot; ? (&quot;+g.get(&quot;enterCoordinateAs&quot;)+&quot; G12)&quot;);</span>
<span class="nc" id="L348">    String s = scannerAnswer.nextLine();</span>
<span class="nc" id="L349">    return getCCaseFromString(s);</span>
  }
  /**
  *{@summary Return the chosen value for ant action.}&lt;br&gt;
  *This action can only be run if action game is on.&lt;br&gt;
  *@return Return ant choice.
  *@version 1.33
  */
  public int getAntChoice(int t[]){
<span class="nc bnc" id="L358" title="All 2 branches missed.">    if (!actionGameOn) {return -1;}</span>
<span class="nc" id="L359">    String ts [] = new String[17];</span>
<span class="nc bnc" id="L360" title="All 2 branches missed.">    for (int i=0;i&lt;12 ;i++ ) {</span>
<span class="nc" id="L361">      ts[i]=&quot;&quot;;</span>
<span class="nc bnc" id="L362" title="All 4 branches missed.">      if(!tableau.estDansT(t,i) &amp;&amp; Main.getOs().isLinux()){</span>
<span class="nc" id="L363">        ts[i]+=color.NEUTRAL_CROSS_OUT;</span>
      }
<span class="nc" id="L365">      ts[i]+=g.get(&quot;bouton.desc.&quot;+(20+i));</span>
<span class="nc bnc" id="L366" title="All 2 branches missed.">      if(!tableau.estDansT(t,i)){</span>
<span class="nc bnc" id="L367" title="All 2 branches missed.">        if (Main.getOs().isLinux()) {</span>
<span class="nc" id="L368">          ts[i]+=color.NEUTRAL;</span>
        }
<span class="nc" id="L370">        ts[i]+=&quot; (&quot;+g.get(&quot;unaviable&quot;)+&quot;)&quot;;</span>
      }
    }
<span class="nc" id="L373">    ts[12]=g.getM(&quot;setPlayingAnt&quot;);</span>
<span class="nc" id="L374">    ts[13]=g.getM(&quot;endTurn&quot;);</span>
<span class="nc" id="L375">    ts[14]=g.getM(&quot;endGame&quot;);</span>
<span class="nc" id="L376">    ts[15]=g.getM(&quot;pauseActionGame&quot;);</span>
<span class="nc" id="L377">    ts[16]=g.getM(&quot;set&quot;)+&quot; &quot;+g.get(&quot;la&quot;)+&quot; &quot;+g.get(&quot;lookedCase&quot;);</span>
<span class="nc" id="L378">    tToPrint = ts;</span>
<span class="nc" id="L379">    int choice = -1;</span>
    do {
<span class="nc" id="L381">      paint();</span>
<span class="nc" id="L382">      choice = getActionMenu(tToPrint.length)-1;</span>
<span class="nc bnc" id="L383" title="All 2 branches missed.">      if(choice==15){pauseActionGame();tToPrint=ts;}</span>
<span class="nc bnc" id="L384" title="All 2 branches missed.">      if(choice==16){setLookedCase(getCCase());tToPrint=ts;}</span>
<span class="nc bnc" id="L385" title="All 6 branches missed.">    } while ((choice &lt;12 || choice&gt;14) &amp;&amp; !tableau.estDansT(t,choice));</span>
<span class="nc bnc" id="L386" title="All 2 branches missed.">    if(choice==12){Main.getPartie().setPlayingAnt(getAntFromFere());}</span>
<span class="nc" id="L387">    return choice;</span>
  }
  /**
  *{@summary Select an ant from playingAnt anthill.}&lt;br&gt;
  *@version 1.33
  */
  private Fourmi getAntFromFere(){
<span class="nc" id="L394">    int len = Main.getPlayingAnt().getFere().getGc().length();</span>
<span class="nc" id="L395">    String t [] = new String[len];</span>
<span class="nc" id="L396">    List&lt;Creature&gt; list = Main.getPlayingAnt().getFere().getGc().toList();</span>
<span class="nc" id="L397">    int k=0;</span>
<span class="nc bnc" id="L398" title="All 2 branches missed.">    for (Creature c : list ) {</span>
<span class="nc" id="L399">      t[k]=getAllyAntInColor(c); k++;</span>
<span class="nc" id="L400">    }</span>
<span class="nc" id="L401">    tToPrint=t;</span>
<span class="nc" id="L402">    printArray();</span>
<span class="nc" id="L403">    int choice = getActionMenu(len);</span>
<span class="nc" id="L404">    Creature c = list.getItem(choice-1);</span>
<span class="nc bnc" id="L405" title="All 2 branches missed.">    if(c instanceof Fourmi){</span>
<span class="nc" id="L406">      return (Fourmi) c;</span>
    }
<span class="nc" id="L408">    erreur.erreurType(&quot;Fourmi&quot;);</span>
<span class="nc" id="L409">    return null;</span>
  }

  //private functions
  /**
  *{@summary Print all action aviable in a menu.}&lt;br&gt;
  *@version 1.33
  */
  private void printActionMenu(){
<span class="nc" id="L418">    LinkedList&lt;String&gt; list = new LinkedList&lt;String&gt;();</span>
<span class="nc" id="L419">    int i=1;</span>
<span class="nc bnc" id="L420" title="All 2 branches missed.">    while(g.exist(menuName+&quot;.&quot;+i)){</span>
<span class="nc" id="L421">      list.add(g.get(menuName+&quot;.&quot;+i));</span>
<span class="nc" id="L422">      i++;</span>
    }
<span class="nc" id="L424">    i=1;</span>
<span class="nc bnc" id="L425" title="All 2 branches missed.">    for (String s : list ) {</span>
<span class="nc" id="L426">      System.out.println(i+&quot; : &quot;+s);</span>
<span class="nc" id="L427">      i++;</span>
<span class="nc" id="L428">    }</span>
<span class="nc" id="L429">  }</span>
  /**
  *{@summary Print tToPrint.}&lt;br&gt;
  *@version 1.33
  */
  private void printArray(){
<span class="nc bnc" id="L435" title="All 2 branches missed.">    if(tToPrint==null){return;}</span>
<span class="nc" id="L436">    int i=1;</span>
<span class="nc bnc" id="L437" title="All 2 branches missed.">    for (String s : tToPrint ) {</span>
<span class="nc" id="L438">      System.out.println(i+&quot; : &quot;+s);</span>
<span class="nc" id="L439">      i++;</span>
    }
<span class="nc" id="L441">  }</span>
  /**
  *{@summary Print map of the actual Partie.}&lt;br&gt;
  *@version 1.33
  */
  private void printMap(){
<span class="nc bnc" id="L447" title="All 2 branches missed.">    if(cLIMap==null){</span>
<span class="nc" id="L448">      cLIMap = new CLIMap(Main.getPartie().getGc());</span>
    }
<span class="nc" id="L450">    System.out.println(cLIMap);</span>
<span class="nc" id="L451">  }</span>
  /**
  *{@summary Print anthill of the playing ant.}&lt;br&gt;
  *@version 1.33
  */
  private void printFereInColor(){
<span class="nc bnc" id="L457" title="All 2 branches missed.">    if(Main.getPlayingAnt()==null){return;}</span>
<span class="nc" id="L458">    System.out.println(g.getM(&quot;fourmilière&quot;)+&quot; : &quot;);</span>
<span class="nc" id="L459">    List&lt;Creature&gt; lgc = Main.getPlayingAnt().getFere().getGc().toList();</span>
<span class="nc bnc" id="L460" title="All 2 branches missed.">    for (Creature c : lgc ) {</span>
<span class="nc bnc" id="L461" title="All 2 branches missed.">      if (c.equals(Main.getPlayingAnt())){</span>
<span class="nc" id="L462">        System.out.print(&quot;-- ! -- &quot;);</span>
      }
<span class="nc" id="L464">      System.out.println(getAllyAntInColor(c));</span>
<span class="nc" id="L465">    }</span>
<span class="nc" id="L466">  }</span>
  /**
  *{@summary Return the color depending of the status of c for playingAnt.}&lt;br&gt;
  *param c The Creature to inspect to know if it is ally, enemy or neutral (or equals to playingAnt).&lt;br&gt;
  *@version 1.38
  */
  private String getAllyAntInColor(Creature c){
<span class="nc" id="L473">    String r = &quot;&quot;;</span>
<span class="nc bnc" id="L474" title="All 2 branches missed.">    if(Main.getOs().isLinux()){</span>
<span class="nc bnc" id="L475" title="All 2 branches missed.">      if (c.getStade()==0) {</span>
<span class="nc bnc" id="L476" title="All 2 branches missed.">        if(c.getAction()==c.getActionMax()){</span>
<span class="nc" id="L477">          r+=color.GREEN;</span>
<span class="nc bnc" id="L478" title="All 2 branches missed.">        }else if (c.getAction()&lt;=0) {</span>
<span class="nc" id="L479">          r+=color.RED;</span>
        }else{
<span class="nc" id="L481">          r+=color.YELLOW;</span>
        }
      }
    }
<span class="nc" id="L485">    r+=c;</span>
<span class="nc bnc" id="L486" title="All 2 branches missed.">    if(Main.getOs().isLinux()){</span>
<span class="nc" id="L487">      r+=color.NEUTRAL;</span>
    }
<span class="nc" id="L489">    return r;</span>
  }
  /**
  *{@summary Return an aviable action in a menu.}&lt;br&gt;
  *stop stop the game.
  *cheat alowed to write 1 cheat code.
  *@version 1.33
  */
  private int getActionMenu(int maxValue){
<span class="nc" id="L498">    int returnValue = -1;</span>
<span class="nc bnc" id="L499" title="All 4 branches missed.">    while(returnValue &lt; 1 || returnValue &gt; maxValue){</span>
<span class="nc" id="L500">      System.out.println(g.get(&quot;choix&quot;)+&quot; : &quot;);</span>
<span class="nc" id="L501">      String input = scannerAnswer.nextLine();</span>
      try {
<span class="nc" id="L503">        returnValue = (int) str.sToLThrows(input);</span>
<span class="nc" id="L504">      }catch (Exception e) {</span>
<span class="nc bnc" id="L505" title="All 2 branches missed.">        if(input.equals(&quot;stop&quot;)){</span>
<span class="nc" id="L506">          Main.quitter();</span>
<span class="nc bnc" id="L507" title="All 2 branches missed.">        }else if(input.equals(&quot;cheat&quot;)){</span>
<span class="nc" id="L508">          input = scannerAnswer.nextLine();</span>
<span class="nc" id="L509">          triche.commande(input);</span>
        }
<span class="nc" id="L511">      }</span>
<span class="nc" id="L512">    }</span>
<span class="nc" id="L513">    return returnValue;</span>
  }
  /**
  *{@summary Ask a save name to the user.}&lt;br&gt;
  *If nothing is choose, save will have defaultName.&lt;br&gt;
  *Save name will be file save for every os.&lt;br&gt;
  *@version 1.39
  */
  private String getSaveName(){
<span class="nc" id="L522">    String saveName = g.getM(&quot;sauvegarde&quot;)+&quot; &quot;+sauvegarderUnePartie.getSave().getIdS();</span>
<span class="nc" id="L523">    saveName+=&quot;  &quot;+Temps.getDatePourSauvegarde();</span>
<span class="nc" id="L524">    saveName = str.sToFileName(saveName);//le pseudo pourrai contenir des char interdits sur des fichiers.</span>
<span class="nc" id="L525">    String t [] = new String[2];</span>
<span class="nc" id="L526">    System.out.println(sep);</span>
<span class="nc" id="L527">    System.out.println(g.getM(&quot;set&quot;)+&quot; &quot;+g.get(&quot;le&quot;)+&quot; &quot;+g.get(&quot;saveName&quot;)+&quot;.&quot;);</span>
<span class="nc" id="L528">    System.out.println(t[1]=g.getM(&quot;defaultName&quot;)+&quot; : &quot;+saveName);</span>
<span class="nc" id="L529">    String input = scannerAnswer.nextLine();</span>
<span class="nc bnc" id="L530" title="All 2 branches missed.">    if(!input.equals(&quot;&quot;)){</span>
<span class="nc" id="L531">      saveName = str.sToFileName(input);</span>
    }
<span class="nc" id="L533">    return saveName;</span>
  }
  /**
  *{@summary transforme a String to a CCase and return it.}&lt;br&gt;
  *This action can only be run if action game is on.&lt;br&gt;
  *@param s String like this: &quot;b13&quot;, &quot;2c&quot;&lt;br&gt;
  *@return Selected CCase or null if it fail.
  *@version 1.39
  */
  //public only for test
  public CCase getCCaseFromString(String s){
<span class="fc" id="L544">    s = s.toLowerCase();</span>
<span class="fc" id="L545">    String numbers=&quot;&quot;;</span>
<span class="fc" id="L546">    String letters=&quot;&quot;;</span>
<span class="fc" id="L547">    int len = s.length();</span>
<span class="fc bfc" id="L548" title="All 2 branches covered.">    for (int i=0; i&lt;len;i++) {</span>
<span class="fc" id="L549">      char c = s.charAt(i);</span>
<span class="fc bfc" id="L550" title="All 4 branches covered.">      if(c&gt;47 &amp;&amp; c&lt;58){</span>
<span class="fc" id="L551">        numbers+=c;</span>
<span class="pc bpc" id="L552" title="1 of 4 branches missed.">      }else if(c&gt;96 &amp;&amp; c&lt;123){</span>
<span class="fc" id="L553">        letters+=c;</span>
      }
    }
<span class="fc bfc" id="L556" title="All 4 branches covered.">    if(numbers.equals(&quot;&quot;) || letters.equals(&quot;&quot;)){</span>
<span class="fc" id="L557">      erreur.alerte(g.get(&quot;caseUnkwnowed&quot;));</span>
<span class="fc" id="L558">      return null;</span>
    }
<span class="fc" id="L560">    int y = 0;</span>
<span class="pc bpc" id="L561" title="1 of 2 branches missed.">    if(letters.length()&gt;2){</span>
<span class="nc" id="L562">      erreur.erreurPasEncoreImplemente();</span>
<span class="nc" id="L563">      return null;</span>
<span class="fc bfc" id="L564" title="All 2 branches covered.">    }else if (letters.length()==2) {</span>
<span class="fc" id="L565">      y = (letters.charAt(0)-96)*26 + letters.charAt(1)-97;</span>
    }else{
<span class="fc" id="L567">      y = letters.charAt(0)-97;</span>
    }
<span class="fc" id="L569">    int x = str.sToI(numbers);</span>
<span class="fc" id="L570">    CCase cc = Main.getGc().getCCase(x,y);</span>
<span class="fc bfc" id="L571" title="All 2 branches covered.">    if(cc==null){</span>
<span class="fc" id="L572">      erreur.alerte(g.get(&quot;theCaseDoNotExist&quot;));</span>
    }
<span class="fc" id="L574">    return cc;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>