<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GString.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Formiko</a> &gt; <a href="index.source.html" class="el_package">fr.formiko.usuel.listes</a> &gt; <span class="el_source">GString.java</span></div><h1>GString.java</h1><pre class="source lang-java linenums">package fr.formiko.usuel.listes;

import fr.formiko.usuel.g;
import fr.formiko.usuel.maths.math;
import fr.formiko.usuel.erreur;
import fr.formiko.usuel.types.str;

import java.io.Serializable;
import javax.swing.JComboBox;

/**
*{@summary Custom String Linked List class.}&lt;br&gt;
*It have a lot of useful function that use fore() loop.&lt;br&gt;
*@version 1.41
*@author Hydrolien
*/
public class GString extends List&lt;String&gt; implements Serializable {
  // CONSTRUCTEUR -----------------------------------------------------------------
  /**
  *{@summary Constructor from an array.}&lt;br&gt;
  *@version 1.41
  */
<span class="nc" id="L23">  public GString(String t[]){</span>
<span class="nc bnc" id="L24" title="All 2 branches missed.">    for (String s : t ) {</span>
<span class="nc" id="L25">      add(s);</span>
    }
<span class="nc" id="L27">  }</span>
<span class="fc" id="L28">  public GString(){}</span>

  // GET SET -----------------------------------------------------------------------

  // Fonctions propre -----------------------------------------------------------
  /**
  *{@summary Return a JComboBox with all the String in it.}&lt;br&gt;
  *@param x the default select item.
  *@version 1.41
  */
  public JComboBox&lt;String&gt; getComboBox(int x){
<span class="nc" id="L39">    JComboBox&lt;String&gt; cb = new JComboBox&lt;String&gt;();</span>
<span class="nc bnc" id="L40" title="All 2 branches missed.">    for (String s : this ) {</span>
<span class="nc" id="L41">      cb.addItem(s);</span>
<span class="nc" id="L42">    }</span>
<span class="nc bnc" id="L43" title="All 2 branches missed.">    if(x!=0){</span>
      try {
<span class="nc" id="L45">        cb.setSelectedItem(getItem(x));</span>
<span class="nc" id="L46">      }catch (Exception e) {</span>
<span class="nc" id="L47">        erreur.erreur(&quot;Impossible de mettre l'élément n°&quot;+x+&quot; par défaut.&quot;);</span>
<span class="nc" id="L48">      }</span>
    }
<span class="nc" id="L50">    return cb;</span>
  }
  /***
  *{@summary Return a JComboBox with all the String in it.}&lt;br&gt;
  *1a item is selected.
  *@version 1.41
  */
<span class="nc" id="L57">  public JComboBox&lt;String&gt; getComboBox(){ return getComboBox(0);}</span>
  /**
  *{@summary Return the translation key for s.}&lt;br&gt;
  *If it fail it return null.&lt;br&gt;
  *@param s the string give by the key.
  *@version 1.41
  */
  public String getKey(String s){
<span class="nc bnc" id="L65" title="All 2 branches missed.">    for (String key : this ) {</span>
<span class="nc bnc" id="L66" title="All 2 branches missed.">      if(g.get(key).equalsIgnoreCase(s)){return key;}</span>
<span class="nc" id="L67">    }</span>
<span class="nc" id="L68">    return null;</span>
  }
  /**
  *{@summary Add item peace by peace.}&lt;br&gt;
  *@param s the String to split.
  *@param maxLen the max length for a line.
  *@param doNotCutWord if true word will not be cut. (If a word is too long for being in 1 line it will be cut.)
  *@version 1.41
  */
  public void addParMorceaux(String s, int maxLen, boolean doNotCutWord){
<span class="nc" id="L78">    int k=0; int lens = s.length();</span>
<span class="nc bnc" id="L79" title="All 2 branches missed.">    if(!doNotCutWord){</span>
<span class="nc bnc" id="L80" title="All 2 branches missed.">      while(k&lt;lens){</span>
<span class="nc" id="L81">        add(s.substring(k,math.min(k+maxLen,lens))); //ajout de la sous chaine a partir de k et pendant maxLen. Sauf la dernière qui s'arrète a lens et pas a k+maxLen.</span>
<span class="nc" id="L82">        k=k+maxLen;</span>
      }
    }else{//on évite de couper des mots.
<span class="nc bnc" id="L85" title="All 2 branches missed.">      while(k&lt;lens){</span>
<span class="nc" id="L86">        String sub = s.substring(k,lens);//ce qu'on a pas encore affiché.</span>
<span class="nc" id="L87">        String t[] = sub.split(&quot; &quot;);</span>
<span class="nc" id="L88">        String s2=&quot;&quot;;</span>
<span class="nc" id="L89">        int i=0; int lent=t.length;</span>
<span class="nc bnc" id="L90" title="All 6 branches missed.">        while(i&lt;lent &amp;&amp; (s2.length()+t[i].length()&lt;maxLen || s2.length()==0)){//tant qu'on dépace pas le nombre de char autorisé on ajoute des mots. On ajoute quand meme un mot si il est trop long pour la chaine.</span>
<span class="nc bnc" id="L91" title="All 2 branches missed.">          if(s2.length()&gt;0){s2=s2+&quot; &quot;;}</span>
<span class="nc" id="L92">          s2=s2+t[i];</span>
<span class="nc" id="L93">          i++;</span>
        }
<span class="nc" id="L95">        add(s2);</span>
<span class="nc" id="L96">        k=k+s2.length()+1;</span>
<span class="nc" id="L97">      }</span>
    }
<span class="nc" id="L99">  }</span>
  /***
  *{@summary Add item peace by peace.}&lt;br&gt;
  *@param s the String to split.
  *@param maxLen the max length for a line.
  *@version 1.41
  */
<span class="nc" id="L106">  public void addParMorceaux(String s, int maxLen){addParMorceaux(s,maxLen,false);}</span>
  /**
  *{@summary Print this.}&lt;br&gt;
  *If is empty it will print a special mail.
  *@version 1.41
  */
  public void afficheToi(){
<span class="nc bnc" id="L113" title="All 2 branches missed.">    if(getHead()==null){</span>
<span class="nc" id="L114">      System.out.println(g.get(&quot;GString&quot;,1,&quot;Le GString est vide&quot;));</span>
    }else{
      //getHead().afficheTout();
<span class="nc" id="L117">      System.out.println(toStringLong());</span>
    }
<span class="nc" id="L119">  }</span>
  // public void classer(){
  //   if (getHead()==null){ return;}
  //   //getHead().classer(); a poursuivre
  // }
  /**
  *{@summary Do a transformation for score.}&lt;br&gt;
  *@version 1.41
  */
  public GString transformerScore(){
<span class="nc bnc" id="L129" title="All 2 branches missed.">    if (getHead()==null){ return null;}</span>
      /*on cherche a passer de :
      1,0,0,0,0
      1,1,0,0,1

      1,2,0,0,0
      1,3,0,0,0

      a :
      1,0,0,0,0,,1,2,0,0,0
      1,2,0,0,1,,1,3,0,0,0
      */
      //phase 1 on cré un tableau avec tout les éléments de début.
      //String t [] = {&quot;Reine...&quot;}
<span class="nc" id="L143">      String t [] = getHead().getContent().split(&quot;\n&quot;);int lent = t.length;</span>
      //phase 2 on add a la fin de chaque line les éléments de chaque CString.
<span class="nc bnc" id="L145" title="All 2 branches missed.">      for (String s : this ) {</span>
<span class="nc" id="L146">        String tTemp [] = s.split(&quot;\n&quot;);</span>
<span class="nc bnc" id="L147" title="All 2 branches missed.">        for (int i=0;i&lt;lent ;i++ ) {//on ajoute tout les nouveau éléments</span>
<span class="nc" id="L148">          t[i]=t[i]+&quot;,,&quot;+tTemp[i];</span>
        }
<span class="nc" id="L150">      }</span>
      //phase 3 on passe du tableau au GString.
<span class="nc" id="L152">      GString gsr = new GString();</span>
<span class="nc" id="L153">      String s = g.getM(&quot;reine&quot;)+&quot;,&quot;+g.getM(&quot;imago&quot;)+&quot;,&quot;+g.getM(&quot;nymphe&quot;)+&quot;,&quot;+g.getM(&quot;larve&quot;)+&quot;,&quot;+g.getM(&quot;oeuf&quot;)+&quot;,,&quot;;</span>
<span class="nc" id="L154">      int lengj = length();</span>
<span class="nc" id="L155">      String s2 = &quot;&quot;;</span>
<span class="nc bnc" id="L156" title="All 2 branches missed.">      for(int i=0;i&lt;lengj;i++){</span>
<span class="nc" id="L157">        s2=s2+s;</span>
      }
<span class="nc" id="L159">      gsr.add(s2);</span>
<span class="nc bnc" id="L160" title="All 2 branches missed.">      for (int i=0;i&lt;lent ;i++ ) {</span>
<span class="nc" id="L161">        gsr.add(t[i]);</span>
      }
<span class="nc" id="L163">      return gsr;</span>
  }
  /**
  *{@summary Count different line between this &amp;#38; gs2.}&lt;br&gt;
  *@version 1.41
  */
  public int compterlineDifferenteDe(GString gs2){
<span class="nc" id="L170">    int cpt=0;</span>
<span class="nc bnc" id="L171" title="All 2 branches missed.">    for (String line : this ) {</span>
<span class="nc bnc" id="L172" title="All 2 branches missed.">      if(!gs2.containt(line)){cpt++;}//on compte 1 line différente.</span>
<span class="nc" id="L173">    }</span>
<span class="nc" id="L174">    return cpt;</span>
  }
  /**
  *{@summary Remove different line between this &amp;#38; gs2.}&lt;br&gt;
  *@version 1.41
  */
  public void supprimerLesLignesCommunesAvec(GString gs2){
<span class="nc bnc" id="L181" title="All 2 branches missed.">    for (String line : this ) {</span>
<span class="nc bnc" id="L182" title="All 2 branches missed.">      if(gs2.containt(line)){</span>
<span class="nc" id="L183">        gs2.remove(line);</span>
<span class="nc" id="L184">        remove(line);//pour évité les soucis de &quot;c'est la 1a CString on passe par le GString.&quot;</span>
      }//on supprime la line en question dans les 2 fichiers.
<span class="nc" id="L186">    }</span>
<span class="nc" id="L187">  }</span>
  /*public boolean supprimer(String s, int max){
    if (getHead()==null){ return 0;}
    if(getHead().getContent().equals(s)){//on teste la 1a CString car après on vérifira seulement la suivante. (puis la suivante et ainsi de suite).
      getHead() = getHead().getNext(); return true;
    }
    int b = getHead().supprimer(s);
    actualiserFin();
    if(!b){System.out.println(&quot;la suppression de la line qui suis n'as pas pu etre éffectuée&quot;+s);}
    return b;
  }*/
  /**
  *{@summary count how much fonction and class (short or long) a GString have.}
  *@version 1.41
  */
  public GInt compterFct(){
<span class="fc bfc" id="L203" title="All 2 branches covered.">    if (getHead()==null){ GInt gi = new GInt(); gi.add(0);gi.add(0); return gi;}</span>
<span class="fc" id="L204">    int shortFct=0; int longFct=0;</span>
<span class="fc bfc" id="L205" title="All 2 branches covered.">    for (String line : this ) {</span>
<span class="pc bpc" id="L206" title="7 of 14 branches missed.">      if(str.contient(line,&quot;{&quot;) &amp;&amp; !estCom(line) &amp;&amp; (str.contient(line, &quot;class&quot;) || str.contient(line, &quot;interface&quot;) || str.contient(line,&quot;public&quot;) || str.contient(line,&quot;private&quot;) || str.contient(line,&quot;protected&quot;))){</span>
<span class="fc bfc" id="L207" title="All 2 branches covered.">        if(str.contient(line,&quot;}&quot;)){</span>
<span class="fc" id="L208">          shortFct++;</span>
        }else{
<span class="fc" id="L210">          longFct++;</span>
        }
      }
<span class="fc" id="L213">    }</span>
<span class="fc" id="L214">    GInt r = new GInt();</span>
<span class="fc" id="L215">    r.add(shortFct);r.add(longFct);</span>
<span class="fc" id="L216">    return r;</span>
  }
  /**
  *{@summary count how much javadoc commentary a GString have.}
  *@version 1.41
  */
  public int compterComJavadoc(){
<span class="fc" id="L223">    int c=0;</span>
<span class="fc bfc" id="L224" title="All 2 branches covered.">    for (String line : this ) {</span>
<span class="fc bfc" id="L225" title="All 4 branches covered.">      if(str.contient(line,&quot;/**&quot;) &amp;&amp; !str.contient(line,&quot;/***&quot;)){</span>
<span class="fc" id="L226">        c++;</span>
      }
<span class="fc" id="L228">    }</span>
<span class="fc" id="L229">    return c;</span>
  }
  /**
  *{@summary count how much javadoc commentary and fonction and class (short or long) a GString have.}
  *@version 1.13
  */
  public GInt compterFctEtComJavadoc(){
<span class="nc" id="L236">    GInt gi = compterFct();</span>
<span class="nc" id="L237">    gi.add(compterComJavadoc());</span>
<span class="nc" id="L238">    return gi;</span>
  }
  /**
  *{@summary count how much class and long fonction (public, ø, protected, private) a GString have.}
  *@version 1.41
  */
  public GInt compterFctEnDetail(){
<span class="fc bfc" id="L245" title="All 2 branches covered.">    if (getHead()==null){ GInt gi = new GInt(); gi.add(0);gi.add(0);gi.add(0);gi.add(0);gi.add(0); return gi;}</span>
<span class="fc" id="L246">    int c=0; int pu=0; int po=0; int pr=0;</span>
<span class="fc bfc" id="L247" title="All 2 branches covered.">    for (String line : this ) {</span>
<span class="pc bpc" id="L248" title="1 of 6 branches missed.">      if(!str.contient(line,&quot;}&quot;) &amp;&amp; str.contient(line,&quot;{&quot;) &amp;&amp; !estCom(line)) {</span>
        //if(!str.contient(line,&quot;if(&quot;) &amp;&amp; !str.contient(line,&quot;if (&quot;) &amp;&amp; !str.contient(line,&quot;while&quot;) &amp;&amp; !str.contient(line,&quot;for(&quot;) &amp;&amp; !str.contient(line,&quot;for (&quot;) &amp;&amp; !str.contient(line,&quot;switch&quot;)){
<span class="fc bfc" id="L250" title="All 4 branches covered.">        if(str.contient(line, &quot;class&quot;) || str.contient(line, &quot;interface&quot;)){</span>
<span class="fc" id="L251">          c++;</span>
<span class="pc bpc" id="L252" title="2 of 4 branches missed.">        }else if (str.contient(line, &quot;(&quot;) &amp;&amp; str.contient(line, &quot;)&quot;)){</span>
<span class="fc bfc" id="L253" title="All 2 branches covered.">          if(str.contient(line, &quot;public&quot;)){</span>
<span class="fc" id="L254">            pu++;</span>
<span class="fc bfc" id="L255" title="All 2 branches covered.">          }else if(str.contient(line, &quot;protected&quot;)){</span>
<span class="fc" id="L256">            po++;</span>
<span class="pc bpc" id="L257" title="1 of 2 branches missed.">          }else if(str.contient(line, &quot;private&quot;)){</span>
<span class="fc" id="L258">            pr++;</span>
          }
        }
      }
<span class="fc" id="L262">    }</span>
<span class="fc" id="L263">    GInt gi = new GInt();</span>
<span class="fc" id="L264">    gi.add(c);gi.add(pu);gi.add(po);gi.add(pr);</span>
<span class="fc" id="L265">    return gi;</span>
  }
  /**
  *{@summary Return true if is a java commentary line.}&lt;br&gt;
  *Line can have a comment at the end of the line &amp;#38; be concidered as a non-comment line if comment start after char 20 &amp;#38; midle of the line.&lt;br&gt;
  *@version 1.41
  */
  private boolean estCom(String line){
<span class="pc bpc" id="L273" title="1 of 2 branches missed.">    if(str.contient(line.substring(0,math.min(line.length()/2,20)),&quot;/*&quot;)){return true;}</span>
<span class="pc bpc" id="L274" title="1 of 2 branches missed.">    if(str.contient(line.substring(0,math.min(line.length()/2,20)),&quot;//&quot;)){return true;}</span>
<span class="fc" id="L275">    return false;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>